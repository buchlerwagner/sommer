{% macro productItem(data, stopSale, showCategory = false, context) %}
    {% import _self as tools %}
    <div id="item-{{ data.id }}" class="shop-item col-lg-4 col-md-6 col-sm-12">
        <div class="inner-box">
            <div class="image-box">
                {% if data.variants[0].price.discount > 0 and data.variants[0].price.value > data.variants[0].price.discount %}
                <div class="sale-tag">{{ _('LBL_SALE') }}</div>
                {% endif %}
                <figure class="image">
                    <a href="{{ data.url }}">
                        <img src="{% if data.thumbnail %}{{ data.thumbnail }}{% else %}{{ context.theme }}images/no-img.png{% endif %}" alt="{{ data.name }}" title="{{ data.name }}">
                    </a>
                </figure>
                <div class="btn-box">
                    {% if data.available and not stopSale %}
                        <a href=""><i class="far fa-cart-plus"></i> {{ _('LBL_ADD_TO_CART') }}</a>
                    {% else %}
                        <a href="{{ data.url }}"> {{ _('LBL_VIEW_DETAILS') }}</a>
                    {% endif %}
                </div>
            </div>
            <div class="lower-content">
                <h4 class="name">
                    <a href="{{ data.url }}">{{ data.name }}</a>
                </h4>
                {% if showCategory %}
                <a href="{{ data.category.url }}">{{ data.category.name }}</a>
                {% endif %}
                {{ tools.ratingStars(data.ratings.value, data.ratings.reviews) }}
                <div class="price">
                    {% if data.variants[0].price.discount > 0 and data.variants[0].price.value > data.variants[0].price.discount  %}
                        <del>{{ _price(data.variants[0].price.value, data.variants[0].price.currency) }}</del>
                        {{ _price(data.variants[0].price.discount, data.variants[0].price.currency) }}{% if data.variants[0].packaging.packageUnitName %}/{{ data.variants[0].packaging.packageUnitName }}{% endif %}{% if data.hasVariants %}{{ _('LBL_PRICE_FROM') }}{% endif %}
                    {% else %}
                        {{ _price(data.variants[0].price.value, data.variants[0].price.currency) }}{% if data.variants[0].packaging.packageUnitName %}/{{ data.variants[0].packaging.packageUnitName }}{% endif %}{% if data.hasVariants %}{{ _('LBL_PRICE_FROM') }}{% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endmacro %}

{% macro ratingStars(value, reviews) %}
    {% if value and reviews %}
    <div class="rating">
        <span class="fa fa-star"></span>
        <span class="fa fa-star"></span>
        <span class="fa fa-star"></span>
        <span class="fa fa-star"></span>
        <span class="fa fa-star light"></span>
    </div>
    {% endif %}
{% endmacro %}

{% macro pager(data) %}
    {% if data.totalpages > 1 %}

        {% set total_pages = data.totalpages %}
        {% set pager_buttons = 8 %}

        <ul class="pagination justify-content-center">
            <li class="page-item{% if data.page == 1 %} active{% endif %}"><a href="{{ data.dir }}?page=1{{ data.urlparams }}" class="page-link" data-page="1">1</a></li>
            {% if total_pages > 2 %}

                {% set ellipsis_left = 0 %}
                {% set ellipsis_right = 0 %}

                {% if total_pages > pager_buttons %}

                    {% if data.page >= pager_buttons %}
                        {% if total_pages > pager_buttons + 1 %}
                            {% set ellipsis_left = 1 %}
                        {% endif %}
                        {% set ellipsis_right = 1 %}

                        {% set p_start = data.page - 2 %}
                        {% set p_end = data.page + 2 %}

                        {% if data.page > total_pages - (pager_buttons - 1) %}
                            {% set ellipsis_right = 0 %}
                            {% set p_start = total_pages - (pager_buttons - 1) %}
                            {% set p_end = total_pages - 1 %}
                        {% endif %}

                    {% else %}
                        {% set p_start = 2 %}

                        {% if total_pages > pager_buttons %}
                            {% set p_end = pager_buttons %}
                            {% set ellipsis_right = 1 %}
                        {% else %}
                            {% set p_end = total_pages - 1 %}
                        {% endif %}

                        {% if total_pages > pager_buttons + 1 %}
                            {% set ellipsis_right = 1 %}
                        {% endif %}

                    {% endif %}

                {% else %}
                    {% set p_start = 2 %}
                    {% set p_end = total_pages - 1 %}
                {% endif %}

                {% if ellipsis_left == 1 %}
                    <li class="page-item"><a class="page-link">...</a></li>
                {% endif %}

                {% for page in p_start..p_end %}
                    <li class="page-item{% if page == data.page %} active{% endif %}"><a href="{{ data.dir }}?page={{ page }}{{ data.urlparams }}" class="page-link" data-page="{{ page }}">{{ page }}</a></li>
                {% endfor %}

                {% if ellipsis_right == 1 %}
                    <li class="page-item"><a class="page-link">...</a></li>
                {% endif %}

            {% endif %}

            <li class="page-item{% if total_pages == data.page %} active{% endif %}"><a href="{{ data.dir }}?page={{ total_pages }}{{ data.urlparams }}" class="page-link" data-page="{{ total_pages }}">{{ total_pages }}</a></li>

            <li class="page-item"><a href="{{ data.dir }}?page={{ data.page + 1 }}{{ data.urlparams }}" class="page-link" data-page="{{ data.page + 1 }}"><i class="fas fa-angle-right"></i></a></li>

        </ul>

    {% endif %}
{% endmacro %}

{% macro highlightItem(data) %}
    <div class="service-block">
        <div class="inner-box">
            <div class="image-box">
                <div class="services_frame"><svg viewBox="0 0 500 500"><path d="M488.5,274.5L488.5,274.5l1.8-0.5l-2,0.5c-2.4-8.7-4.5-16.9-4.5-24.5c0-8,2.3-16.5,4.7-25.5 c3.5-13,7.1-26.5,3.7-39.5c-3.6-13.2-13.5-23.1-23.1-32.7c-6.5-6.5-12.6-12.6-16.6-19.4c-3.9-6.8-6.1-15.2-8.5-24.1 c-3.5-13.1-7.1-26.7-16.7-36.3c-9.5-9.5-22.9-13.1-35.9-16.6c-9-2.4-17.5-4.6-24.4-8.7c-6.5-3.8-12.5-9.8-18.9-16.2 c-9.7-9.8-19.6-19.8-33.2-23.4c-13.5-3.7-27.3,0.1-40.4,3.7c-8.7,2.4-16.9,4.6-24.5,4.6c-8,0-16.5-2.3-25.5-4.7 c-9.3-2.5-18.8-5-28.1-5c-3.8,0-7.6,0.4-11.3,1.4C172,11.1,162,21.1,152.4,30.7c-6.5,6.5-12.6,12.6-19.4,16.6 c-6.8,3.9-15.2,6.1-24.1,8.5c-13.1,3.5-26.7,7.1-36.3,16.7c-9.5,9.5-13.1,23-16.6,36c-2.4,9-4.6,17.5-8.7,24.4 c-3.8,6.5-9.8,12.5-16.2,18.9c-9.8,9.7-19.7,19.6-23.4,33.2c-3.7,13.5,0.1,27.3,3.7,40.5c2.4,8.7,4.6,16.9,4.6,24.5 c0,8-2.3,16.5-4.6,25.5c-3.5,13-7.1,26.6-3.7,39.5c3.6,13.2,13.5,23.1,23.1,32.7c6.5,6.5,12.6,12.6,16.6,19.4 c3.9,6.8,6.1,15.1,8.5,24c3.5,13.1,7.1,26.8,16.7,36.4c9.5,9.5,23,13.1,35.9,16.6c9,2.4,17.5,4.6,24.4,8.7 c6.5,3.8,12.5,9.8,18.9,16.2c9.7,9.8,19.6,19.8,33.2,23.5c3.8,1,7.6,1.5,11.8,1.5c9.6,0,19.3-2.7,28.5-5.1c8.8-2.4,17-4.6,24.5-4.6 c8,0,16.5,2.3,25.5,4.6c13,3.6,26.6,7.1,39.5,3.7c13.2-3.6,23.1-13.5,32.7-23.1c6.5-6.5,12.6-12.6,19.4-16.6 c6.7-3.9,15.1-6.1,24-8.5c13.1-3.5,26.8-7.1,36.4-16.8c9.5-9.5,13.1-23,16.6-36c2.4-9,4.6-17.5,8.7-24.4c3.8-6.5,9.8-12.5,16.2-18.9 c9.8-9.7,19.9-19.7,23.6-33.3C495.7,301.4,494.4,287.7,488.5,274.5z"></path></svg></div>
                <figure class="image">
                    <a href="{{ data.url }}">
                        <img src="{{ data.thumbnail }}" alt="">
                    </a>
                </figure>
            </div>
            <h4 class="name mb-1">
                <a href="{{ data.url }}">
                    {{ data.name }}
                </a>
            </h4>
            <div class="price">
                {% if data.variants[0].price.discount > 0 and data.variants[0].price.value > data.variants[0].price.discount  %}
                    {{ _price(data.variants[0].price.discount, data.variants[0].price.currency) }}{% if data.variants[0].packaging.packageUnitName %}/{{ data.variants[0].packaging.packageUnitName }}{% endif %}{% if data.hasVariants %}{{ _('LBL_PRICE_FROM') }}{% endif %}
                {% else %}
                    {{ _price(data.variants[0].price.value, data.variants[0].price.currency) }}{% if data.variants[0].packaging.packageUnitName %}/{{ data.variants[0].packaging.packageUnitName }}{% endif %}{% if data.hasVariants %}{{ _('LBL_PRICE_FROM') }}{% endif %}
                {% endif %}
            </div>
        </div>
    </div>
{% endmacro %}
