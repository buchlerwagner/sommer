var mzOptions={upscale:!1},shoppingCart={inProgress:!1,sendData:function(t,a){shoppingCart.inProgress||$.ajax({url:"/ajax/cart/"+t+"/",type:"post",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t&&(processJSONResponse(t),shoppingCart.reInit()),shoppingCart.setProgress(!1)}})},setProgress:function(t){shoppingCart.inProgress=t},viewPopup:function(){var t=$("#modal");$("#modal .modal-dialog").addClass("modal-lg modal-dialog-centered"),t.find(".modal-content").load("/ajax/cart/popup/",function(){t.modal("show")})},addToCart:function(t,a,e){shoppingCart.sendData("add",{id:t,variant:a,quantity:e})},removeFromCart:function(t){shoppingCart.sendData("remove",{id:t})},setQuantity:function(t,a,e){var n=parseInt($("#quantity").val());n+=t,$("#quantity").val(n),a<n?$("#button-minus").removeAttr("disabled"):$("#button-minus").attr("disabled","disabled"),n<=e?$("#button-plus").removeAttr("disabled"):$("#button-plus").attr("disabled","disabled")},filterProducts:function(){$("#product-filter").submit()},initControls:function(){$(document).on("click",".add-to-cart",function(){var t,a=$(this),e=parseInt(a.data("id"));e&&(t=(t=parseInt(a.data("variant")))||parseInt($("#variant").val()),a=(a=parseInt(a.data("quantity")))||parseInt($("#quantity").val()),shoppingCart.addToCart(e,t,a))}),$(document).on("click",".remove-item",function(){var t=parseInt($(this).data("id"));t&&shoppingCart.removeFromCart(t)}),$(document).on("click",".pager",function(){var t=parseInt($(this).data("page")),a=parseInt($("#page").val());t&&t!=a&&($("#page").val(t),shoppingCart.filterProducts())}),$(document).on("keypress",".filter-search",function(t){if(13==t.which)return shoppingCart.filterProducts(),!1}),$(document).on("change",".sort-products",function(){shoppingCart.filterProducts()}),$(document).on("click",".do-filter",function(){$("#page").val(1),shoppingCart.filterProducts()}),$(document).on("click",".set-shipping-mode",function(){var t=parseInt($(this).data("id"));t&&shoppingCart.sendData("setShippingMode",{id:t})}),$(document).on("click",".set-shipping-mode",function(){$(".set-shipping-mode").each(function(t,a){var e=$(a).parents(".radio-option");$(a).is(":checked")?(e.find("select").removeAttr("disabled"),e.find("input[type=text]").removeAttr("disabled"),e.find("input[type=checkbox]").removeAttr("disabled")):(e.find("select").attr("disabled","disabled"),e.find("input[type=text]").attr("disabled","disabled"),e.find("input[type=checkbox]").attr("disabled","disabled"))})}),$(document).on("click",".set-payment-mode",function(){var t=parseInt($(this).data("id")),a=parseInt($(this).data("type"));t&&shoppingCart.sendData("setPaymentMode",{id:t}),3===a?$("#btnFinish").html($("#btnFinish").data("pay")):$("#btnFinish").html($("#btnFinish").data("default"))}),$(document).on("change",".change-state",function(){var e,t=$(this),a=t.data("stateOptions"),n=!1;a&&(e=this.type&&"checkbox"===this.type?t.is(":checked")?1:0:!this.type||"radio"!==this.type||t.is(":checked")?t.val():0,$.each(a,function(t,a){t==e&&(n=!0,$.each(a,function(t,a){"show"===t?$(a).removeClass("d-none").show():"hide"===t?$(a).hide():"disable"===t?$(a).attr("disabled","disabled"):"enable"===t?$(a).removeAttr("disabled"):"readonly"===t?$(a).attr("readonly","readonly"):"editable"===t?$(a).removeAttr("readonly"):"value"===t&&$(a.el).val(a.val).trigger("change")}))}),n||(t=t.data("stateDefault"))&&$.each(t,function(t,a){"show"===t?$(a).removeClass("d-none").show():"hide"===t?$(a).hide():"disable"===t?$(a).attr("disabled","disabled"):"enable"===t?$(a).removeAttr("disabled"):"readonly"===t?$(a).attr("readonly","readonly"):"editable"===t?$(a).removeAttr("readonly"):"value"===t&&$(a.el).val(a.val)}))}),$(".quantity-select").on("click",function(){var t=$(this),a=parseInt(t.parents(".input-group").find("input").attr("data-min")||1),e=parseInt(t.parents(".input-group").find("input").attr("data-max")||99999);0===e&&(e=99999);var n=parseInt(t.data("value")),i=t.parents(".input-group").find("input"),o=parseInt(i.val());i.val(o=(o=e<(o+=n)?e:o)<a?a:o),a<o?t.parents(".input-group").find(".btn-minus").removeAttr("disabled"):t.parents(".input-group").find(".btn-minus").attr("disabled","disabled"),o<e?t.parents(".input-group").find(".btn-plus").removeAttr("disabled"):t.parents(".input-group").find(".btn-plus").attr("disabled","disabled"),t.parents(".input-group").data("id")&&shoppingCart.sendData("change",{id:t.parents(".input-group").data("id"),quantity:o})}),$(".quantity-input").on("blur",function(){var t=$(this),a=parseInt(t.val()),e=parseInt(t.parents(".input-group").find("input").attr("data-min")||1),n=parseInt(t.parents(".input-group").find("input").attr("data-max")||99999);t.val(a=(a=(n=0===n?99999:n)<a?n:a)<e?e:a),t.parents(".input-group").data("id")&&shoppingCart.sendData("change",{id:t.parents(".input-group").data("id"),quantity:a})}),$(".select-variant").on("change",function(){var t=parseInt($(this).val()),t=$("#item-price-"+t);$(".item-price").hide(),t.removeClass("d-none").show(),$("#quantity").attr("data-min",t.data("min")).attr("data-max",t.data("max")).val(t.data("min")),$("#weight").html(t.data("weight")),$("#quantity-unit").html(t.data("unit")),t.data("img")?(t=document.getElementById("img-"+t.data("img")),MagicZoom.switchTo("zoom",t)):MagicZoom.switchTo("zoom",0)}),$("#set-invoice-address").on("change",function(){$(this).is(":checked")?($("#company-details").find("input").removeAttr("data-parsley-excluded").attr("data-parsley-required","1").parsley(),$(".set-invoice-type").trigger("change")):($("#company-details").find("input").attr("data-parsley-excluded","1").removeAttr("data-parsley-required").parsley(),$("#company-details").find(".form-group").removeClass("has-error has-success"))}),$(".set-invoice-type").on("change",function(){(2===parseInt($("input.set-invoice-type:checked","#frmOrder").val())?$("#o-invoice-vat").removeAttr("data-parsley-excluded").removeAttr("disabled").attr("data-parsley-required","1"):$("#o-invoice-vat").attr("data-parsley-excluded","1").attr("disabled","disabled").removeAttr("data-parsley-required")).parsley()}),$(".set-invoice-type").length&&$(".set-invoice-type").trigger("change"),$(".set-shipping-interval").on("change",function(){var t=$(this),a=t.parents(".shipping-intervals"),e=t.parents(".shipping-intervals").find(".date-picker"),n=!1,i=!1;t.is(":checked")?(a.find(".custom-interval").removeClass("d-none").show(),a.find(".interval-select").hide(),n="today",i=[]):(a.find(".custom-interval").hide(),a.find(".interval-select").removeClass("d-none").show()),0<e.length&&(e.flatpickr({dateFormat:"Y-m-d",minDate:n||e.data("min-date"),disable:i||e.data("off-dates")||[],locale:"hu"}),n||e.val(e.data("min-date")))}),$(document).on("keyup",".numbersonly",function(){var t=$(this).data("chars"),a=$(this).data("replace-from"),e=$(this).data("replace-to");a&&e&&(this.value=this.value.replace(a,e)),""!==t&&void 0!==t||(t="\\-.,");t=new RegExp("[^0-9"+t+"]","ig");this.value=this.value.replace(t,"")}),$(document).on("blur",".numbersonly",function(){var t=$(this).data("chars");""!==t&&void 0!==t||(t="\\-.,");t=new RegExp("[^0-9"+t+"]","ig");this.value=this.value.replace(t,"")}),$("#modal").on("show.bs.modal",function(t){var a="",e=$(this);t.relatedTarget&&((t=$(t.relatedTarget)).data("size")&&$("#modal .modal-dialog").addClass("modal-"+t.data("size")),"#"!==t.attr("href")&&""!==t.attr("href")?a=t.attr("href"):t.data("href")&&(a=t.data("href"))),""!==a&&e.find(".modal-content").load(a)}).on("hidden.bs.modal",function(t){$(t.target).removeData("bs.modal"),$("#ajax-modal .modal-dialog").removeClass("modal-sm modal-lg modal-xl"),$("#ajax-modal .modal-content").html("")}),$(".date-picker:not(.inited)").each(function(){$(this).addClass("inited");var t=$(this).parents(".shipping-intervals").find(".set-shipping-interval"),a=$(this).data("min-date"),e=$(this).data("off-dates")||[],n=$(this).data("dow")||[];t.is(":checked")&&(a="today",e=[]),$(this).flatpickr({dateFormat:"Y-m-d",minDate:a,disable:e,enable:[function(t){return!(0<n.length)||!!n.includes(t.getDay())}],locale:"hu"})}),$.fn.parsley&&$(".parsley-form:not(.inited)").each(function(){$(this).addClass("inited"),$(this).parsley({trigger:"change",errorClass:"is-invalid",successClass:"is-valid",errorsWrapper:"<div></div>",errorTemplate:'<label class="error"></label>'}).on("field:success",function(t){t.$element.parents(".form-group").removeClass("has-error").addClass("has-success")}).on("field:error",function(t){t.$element.parents(".form-group").removeClass("has-success").addClass("has-error")})})},reInit:function(){},init:function(){shoppingCart.initControls()}};function processJSONResponse(t){return"object"!=typeof t&&(t=JSON.parse(t)),$.each(t,function(n,t){$.each(t,function(t,a){var e;"object"==typeof window[n]?"function"==typeof window[n][t]&&window[n][t](a):"show"===t?!0===a?$(n).hide().removeClass("d-none").show():$(n).hide():"tagsinput"===t?$.each(a,function(t,a){a&&$(n).tagsinput("add",a)}):"summernote"===t?($(n).summernote("code",a),crm.isdirty=!1):"addclass"===t?$(n).addClass(a):"removeclass"===t?$(n).removeClass(a):"html"===t?$(n).html(a):"remove"===t?$(n).remove():"append"===t?$(n).append(a):"closeModal"===t?$(n).modal("hide"):"attr"===t?$.each(a,function(t,a){a?$(n).attr(t,a):$(n).removeAttr(t,"")}):"value"===t?$(n).is(":checkbox")||$(n).is(":radio")?$(n).prop("checked",a):$(n).val(a):"options"===t?($(n).find("option").remove(),$(n).append(a.map(function(t){return'<option value="'+t.id+'">'+t.name+"</option>"}))):"functions"===t?!a.callback||"function"==typeof(e=window[a.callback])&&e(a.arguments):"object"==typeof window[t]&&"function"==typeof window[t][n]&&window[t][n](a)})}),t}$(function(){shoppingCart.init()});var tables={inProgress:!1,setProgress:function(t){tables.inProgress=t},sendRequest:function(t,a,e,n){""!==a&&a||(a=0);var i=!1,o=!1,s=$("#table_"+t);tables.setProgress(!0),0<s.length&&(i=s.data("alias"),t=s.data("table"),o=s.data("options"));var d=t+"/"+a+"/";if(4<arguments.length)for(var r=4;r<arguments.length;r++)d+=arguments[r]+"/";$.ajax({method:"GET",url:"/ajax/tables/"+d,data:{alias:i,action:e,params:n,options:o}}).done(function(t){for(var a in t="object"!=typeof t?JSON.parse(t):t)$(a).replaceWith(t[a]);app.reInit(),tables.reInit(),tables.setProgress(!1)})},page:function(t,a,e){tables.sendRequest(t,a,"page",{page:e})},action:function(t,a,e,n){$("#confirm-delete").modal("hide"),tables.sendRequest(t,a,e,n)},reloadTable:function(t){tables.reload(t[0],t[1],t[2])},reload:function(t,a,e){(e=void 0===e||e)&&$("#ajax-modal").modal("hide"),tables.sendRequest(t,a,"reload")},initControls:function(){$(document).on("click",".tr-clickable",function(t){var a;$(this).data("modal")?((a=$("#ajax-modal")).find(".modal-dialog").addClass("modal-"+$(this).data("size")),a.find(".modal-content").load($(this).data("href")),a.modal("show")):$(this).data("url")?"self"===$(this).data("target")?document.location=$(this).data("url"):window.open($(this).data("url")):(a=$("a[data-toggle='modal'] i"),$(t.target).is(a)||(window.location.href+=$(this).data("edit")))}),$(".td-clickable").on("click",function(t){var a=$(this).parent("tr").data("url");document.location=a}),$(document).on("click",".btn-table-pager",function(t){var a=$(this),e=a.parents(".pagination").data("table"),n=a.parents(".pagination").data("keyvalues"),i=a.data("page");a.hasClass("disabled")||a.hasClass("active")||tables.page(e,n,i)}),$(document).on("click",".table-options, .table-check",function(t){t.stopImmediatePropagation()})},init:function(){this.initControls()}};$(function(){tables.init()});
//# sourceMappingURL=shop.min.js.map