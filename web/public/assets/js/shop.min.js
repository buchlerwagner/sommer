var mzOptions={upscale:!1},shoppingCart={inProgress:!1,sendData:function(a,t){shoppingCart.inProgress||$.ajax({url:"/ajax/cart/"+a+"/",type:"post",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){a&&(processJSONResponse(a),shoppingCart.reInit()),shoppingCart.setProgress(!1)}})},setProgress:function(a){shoppingCart.inProgress=a},viewPopup:function(){var a=$("#modal");$("#modal .modal-dialog").addClass("modal-lg modal-dialog-centered"),a.find(".modal-content").load("/ajax/cart/popup/",function(){a.modal("show")})},addToCart:function(a,t,e){shoppingCart.sendData("add",{id:a,variant:t,quantity:e})},removeFromCart:function(a){shoppingCart.sendData("remove",{id:a})},setQuantity:function(a,t,e){var n=parseInt($("#quantity").val());n+=a,$("#quantity").val(n),t<n?$("#button-minus").removeAttr("disabled"):$("#button-minus").attr("disabled","disabled"),n<=e?$("#button-plus").removeAttr("disabled"):$("#button-plus").attr("disabled","disabled")},initControls:function(){$(document).on("click",".add-to-cart",function(){var a,t=$(this),e=parseInt(t.data("id"));e&&(a=(a=parseInt(t.data("variant")))||parseInt($("#variant").val()),t=(t=parseInt(t.data("quantity")))||parseInt($("#quantity").val()),shoppingCart.addToCart(e,a,t))}),$(document).on("click",".remove-item",function(){var a=parseInt($(this).data("id"));a&&shoppingCart.removeFromCart(a)}),$(document).on("click",".set-shipping-mode",function(){var a=parseInt($(this).data("id"));a&&shoppingCart.sendData("setShippingMode",{id:a})}),$(document).on("click",".set-payment-mode",function(){var a=parseInt($(this).data("id"));a&&shoppingCart.sendData("setPaymentMode",{id:a})}),$(".quantity-select").on("click",function(){var a=$(this),t=parseInt(a.parents(".input-group").find("input").attr("data-min")||1),e=parseInt(a.parents(".input-group").find("input").attr("data-max")||99999);0===e&&(e=99999);var n=parseInt(a.data("value")),i=a.parents(".input-group").find("input"),r=parseInt(i.val());i.val(r=(r=e<(r+=n)?e:r)<t?t:r),t<r?a.parents(".input-group").find(".btn-minus").removeAttr("disabled"):a.parents(".input-group").find(".btn-minus").attr("disabled","disabled"),r<e?a.parents(".input-group").find(".btn-plus").removeAttr("disabled"):a.parents(".input-group").find(".btn-plus").attr("disabled","disabled"),a.parents(".input-group").data("id")&&shoppingCart.sendData("change",{id:a.parents(".input-group").data("id"),quantity:r})}),$(".quantity-input").on("blur",function(){var a=$(this),t=parseInt(a.val()),e=parseInt(a.parents(".input-group").find("input").attr("data-min")||1),n=parseInt(a.parents(".input-group").find("input").attr("data-max")||99999);a.val(t=(t=(n=0===n?99999:n)<t?n:t)<e?e:t),a.parents(".input-group").data("id")&&shoppingCart.sendData("change",{id:a.parents(".input-group").data("id"),quantity:t})}),$(".select-variant").on("change",function(){var a=parseInt($(this).val()),a=$("#item-price-"+a);$(".item-price").hide(),a.removeClass("d-none").show(),$("#quantity").attr("data-min",a.data("min")).attr("data-max",a.data("max")).val(a.data("min")),$("#weight").html(a.data("weight")),a.data("img")?(a=document.getElementById("img-"+a.data("img")),MagicZoom.switchTo("zoom",a)):MagicZoom.switchTo("zoom",0)}),$("#set-invoice-address").on("change",function(){$(this).is(":checked")?($("#company-details").find("input").removeAttr("data-parsley-excluded").attr("data-parsley-required","1").parsley(),$(".set-invoice-type").trigger("change")):($("#company-details").find("input").attr("data-parsley-excluded","1").removeAttr("data-parsley-required").parsley(),$("#company-details").find(".form-group").removeClass("has-error has-success"))}),$(".set-invoice-type").on("change",function(){(2===parseInt($("input.set-invoice-type:checked","#frmOrder").val())?$("#o-invoice-vat").removeAttr("data-parsley-excluded").removeAttr("disabled").attr("data-parsley-required","1"):$("#o-invoice-vat").attr("data-parsley-excluded","1").attr("disabled","disabled").removeAttr("data-parsley-required")).parsley()}),$(".set-invoice-type").length&&$(".set-invoice-type").trigger("change"),$(document).on("keyup",".numbersonly",function(){var a=$(this).data("chars"),t=$(this).data("replace-from"),e=$(this).data("replace-to");t&&e&&(this.value=this.value.replace(t,e)),""!==a&&void 0!==a||(a="\\-.,");a=new RegExp("[^0-9"+a+"]","ig");this.value=this.value.replace(a,"")}),$(document).on("blur",".numbersonly",function(){var a=$(this).data("chars");""!==a&&void 0!==a||(a="\\-.,");a=new RegExp("[^0-9"+a+"]","ig");this.value=this.value.replace(a,"")}),$("#modal").on("show.bs.modal",function(a){var t="",e=$(this);a.relatedTarget&&((a=$(a.relatedTarget)).data("size")&&$("#modal .modal-dialog").addClass("modal-"+a.data("size")),"#"!==a.attr("href")&&""!==a.attr("href")?t=a.attr("href"):a.data("href")&&(t=a.data("href"))),""!==t&&e.find(".modal-content").load(t)}).on("hidden.bs.modal",function(a){$(a.target).removeData("bs.modal"),$("#ajax-modal .modal-dialog").removeClass("modal-sm modal-lg modal-xl"),$("#ajax-modal .modal-content").html("")}),$.fn.parsley&&$(".parsley-form:not(.inited)").each(function(){$(this).addClass("inited"),$(this).parsley({trigger:"change",errorClass:"is-invalid",successClass:"is-valid",errorsWrapper:"<div></div>",errorTemplate:'<label class="error"></label>'}).on("field:success",function(a){a.$element.parents(".form-group").removeClass("has-error").addClass("has-success")}).on("field:error",function(a){a.$element.parents(".form-group").removeClass("has-success").addClass("has-error")})})},reInit:function(){},init:function(){shoppingCart.initControls()}};function processJSONResponse(a){return"object"!=typeof a&&(a=JSON.parse(a)),$.each(a,function(n,a){$.each(a,function(a,t){var e;"object"==typeof window[n]?"function"==typeof window[n][a]&&window[n][a](t):"show"===a?!0===t?$(n).hide().removeClass("d-none").show():$(n).hide():"tagsinput"===a?$.each(t,function(a,t){t&&$(n).tagsinput("add",t)}):"summernote"===a?($(n).summernote("code",t),crm.isdirty=!1):"addclass"===a?$(n).addClass(t):"removeclass"===a?$(n).removeClass(t):"html"===a?$(n).html(t):"remove"===a?$(n).remove():"append"===a?$(n).append(t):"closeModal"===a?$(n).modal("hide"):"attr"===a?$.each(t,function(a,t){t?$(n).attr(a,t):$(n).removeAttr(a,"")}):"value"===a?$(n).is(":checkbox")||$(n).is(":radio")?$(n).prop("checked",t):$(n).val(t):"options"===a?($(n).find("option").remove(),$(n).append(t.map(function(a){return'<option value="'+a.id+'">'+a.name+"</option>"}))):"functions"===a?!t.callback||"function"==typeof(e=window[t.callback])&&e(t.arguments):"object"==typeof window[a]&&"function"==typeof window[a][n]&&window[a][n](t)})}),a}$(function(){shoppingCart.init()});
//# sourceMappingURL=shop.min.js.map