const Theme=(()=>{"use strict";function t(t,a){const o=[window.innerWidth];return window.addEventListener("resize",()=>{var e=o.length;o.push(window.innerWidth),o[e]!==o[e-1]&&(clearTimeout(a),a=setTimeout(t,150))}),t}function e(e){let t,a,o;switch(e){case"xs":o="d-none d-sm-block";break;case"sm":o="d-block d-sm-none d-md-block";break;case"md":o="d-block d-md-none d-lg-block";break;case"lg":o="d-block d-lg-none d-xl-block";break;case"xl":o="d-block d-xl-none";break;case"smDown":o="d-none d-md-block";break;case"mdDown":o="d-none d-lg-block";break;case"lgDown":o="d-none d-xl-block";break;case"smUp":o="d-block d-sm-none";break;case"mdUp":o="d-block d-md-none";break;case"lgUp":o="d-block d-lg-none"}return t=document.createElement("div"),t.setAttribute("class",o),document.body.appendChild(t),a=null===t.offsetParent,t.parentNode.removeChild(t),a}function s(){return e("lgUp")}var a=.01*window.innerHeight;function o(){document.addEventListener("click",e=>{e.target.closest('[data-toggle="sidebar"]')&&(s()?document.body.classList.toggle("sidebar-collapse"):document.body.classList.toggle("sidebar-expand"),document.querySelector(".sidebar-body").scrollTop=0,window.dispatchEvent(new Event("resize")),e.preventDefault())}),function(){document.body.insertAdjacentHTML("beforeend",'<div class="sidebar-backdrop" id="sidebarBackdrop" data-toggle="sidebar"></div>');const o=document.querySelector(".sidebar");if(o){const n=o.querySelector(".sidebar-body");let t=document.body.classList,a=0,e=!1;n.addEventListener("scroll",function(){e||(a=this.scrollTop)}),document.addEventListener("click",e=>{e.target.closest('[data-toggle="sidebar"]')&&(t.contains("sidebar-collapse")&&!t.contains("sidebar-expand")||(n.scrollTop=a))}),o.addEventListener("mouseenter",()=>{t.contains("sidebar-collapse")&&s()&&(e=!1,n.scrollTop=a)}),o.addEventListener("mouseleave",()=>{t.contains("sidebar-collapse")&&s()&&(e=!0,n.scrollTop=0)})}}()}return document.documentElement.style.setProperty("--vh",`${a}px`),window.addEventListener("resize",()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}),{resize:e=>t(e),xs:()=>e("xs"),sm:()=>e("sm"),md:()=>e("md"),lg:()=>e("lg"),xl:()=>e("xl"),smDown:()=>e("smDown"),mdDown:()=>e("mdDown"),lgDown:()=>e("lgDown"),smUp:()=>e("smUp"),mdUp:()=>e("mdUp"),lgUp:()=>s(),treeview:()=>function(){document.addEventListener("click",e=>{if(e.target.closest(".treeview-toggle")){const a=e.target.closest(".treeview-toggle"),o=a.closest("ul"),n=a.closest(".treeview");void 0!==o.dataset.accordion&&o.querySelectorAll(":scope > li > .show").forEach(e=>a!=e&&e.classList.remove("show")),a.classList.toggle("show");var t=a.classList.contains("show")?"treeview:shown":"treeview:hidden";a.dispatchEvent(new Event(t)),n.dispatchEvent(new Event("treeview:updated")),e.preventDefault()}})}(),toggleSidebar:()=>o(),sidebarBodyCustomScrollBar:()=>{new SimpleBar(document.querySelector(".sidebar .sidebar-body"))},autofocusModal:()=>function(){$(document).on("shown.bs.modal",".modal",function(){const e=this.querySelector("[autofocus]");e&&e.focus()})}(),color:e=>getComputedStyle(document.body).getPropertyValue("--"+e).trim(),customFileInput:()=>function(){document.addEventListener("change",t=>{if(t.target.closest(".custom-file-input")){const o=t.target.closest(".custom-file-input");var a=o.dataset.choose||o.nextElementSibling.innerText;o.dataset.choose||(o.dataset.choose=a);t=o.files.length;let e=t?o.files[0].name:a;e=1<t?t+" files":e,o.parentElement.querySelector("label").textContent=e}})}(),cardToolbar:()=>function(){document.addEventListener("click",e=>{if(e.target.closest("[data-action]")){const a=e.target.closest("[data-action]"),o=a.closest(".card");switch(a.dataset.action){case"fullscreen":o.classList.toggle("card-fullscreen"),o.classList.contains("card-fullscreen")?(a.innerHTML='<i class="material-icons">fullscreen_exit</i>',document.body.style.overflow="hidden"):(a.innerHTML='<i class="material-icons">fullscreen</i>',document.body.removeAttribute("style"));break;case"close":o.remove();break;case"reload":o.insertAdjacentHTML("afterbegin",'<div class="card-loader-overlay"><div class="spinner-border text-white" role="status"></div></div>'),o.dispatchEvent(new Event("card:reload"));break;case"collapse":var t=1e3*parseFloat(getComputedStyle(document.querySelector(".collapsing")).transitionDuration);setTimeout(()=>{document.querySelector(a.dataset.target).matches(".collapse.show")?a.innerHTML='<i class="material-icons">remove</i>':a.innerHTML='<i class="material-icons">add</i>'},t)}}})}(),stopCardLoader:e=>{let t=e.querySelector(".card-loader-overlay");t.parentNode.removeChild(t)},navSection:()=>function(){document.querySelector("#navSection")&&($("body").scrollspy("dispose"),$("body").scrollspy({target:"#navSection",offset:140})),document.addEventListener("click",e=>{if(e.target.closest("#navSection")){const a=document.querySelector(e.target.getAttribute("href"));var t=a.getBoundingClientRect().top+window.pageYOffset-((document.body.dataset.offset||140)-1);window.scrollTo({top:t,behavior:"smooth"}),e.preventDefault()}})}(),accordionActive:()=>function(){$(".collapse.show[data-parent]").closest(".card").addClass("active"),$(document).on("show.bs.collapse",".collapse[data-parent]",function(){$(this).closest(".card").addClass("active")}).on("hide.bs.collapse",".collapse[data-parent]",function(){$(this).closest(".card").removeClass("active")})}(),dropdownHover:()=>function(){document.addEventListener("mouseover",e=>{s()&&(e.target.closest(".dropdown-hover")?($(".dropdown-hover").removeClass("show"),e.target.closest(".dropdown-hover").classList.add("show")):$(".dropdown-hover").removeClass("show"))})}(),checkAll:()=>function(){if(document.querySelectorAll(".has-checkAll").length){for(const e of document.querySelectorAll(".has-checkAll")){const o=e.querySelector('th input[type="checkbox"]'),n=e.querySelectorAll('tr > td:first-child input[type="checkbox"]'),s=e.dataset.bulkTarget;let t=e.dataset.checkedClass;t=t||"table-active",o.addEventListener("click",function(){for(const e of n)e.checked=this.checked,e.checked?e.closest("tr").classList.add(t):e.closest("tr").classList.remove(t);s&&a(s,n)});for(const i of n)i.addEventListener("click",function(){this.checked?this.closest("tr").classList.add(t):this.closest("tr").classList.remove(t),s&&a(s,n)})}function a(e,t){let a=0;const o=document.querySelector(e);t.forEach(e=>e.checked&&a++),o.querySelector(".checked-counter")&&(o.querySelector(".checked-counter").textContent=a),0!=a?o.removeAttribute("hidden"):o.setAttribute("hidden","")}}}(),backgroundCover:()=>function(){document.querySelectorAll("[data-cover]").forEach(e=>e.style.backgroundImage=`url(${e.dataset.cover})`)}(),innerToggleSidebar:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="inner-sidebar"]')){const t=e.target.closest('[data-toggle="inner-sidebar"]'),a=document.body;a.classList.toggle("inner-expand"),a.classList.contains("inner-expand")?t.innerHTML='<i class="material-icons">close</i>':t.innerHTML='<i class="material-icons">arrow_forward_ios</i>',e.preventDefault()}})}(),scrollNavbar:()=>function(){if(document.querySelector(".main-navbar")){const a=document.querySelector(".main-navbar .navbar-collapse");setTimeout(()=>{t(()=>{if(s())for(const e of document.querySelectorAll("[data-scroll]"))a.querySelector(".navbar-nav").getBoundingClientRect().width>a.getBoundingClientRect().width?e.removeAttribute("hidden"):e.setAttribute("hidden","")})()},500);for(const o of document.querySelectorAll("[data-scroll]"))o.addEventListener("click",e=>{var t=a.getBoundingClientRect().width/2;switch(o.dataset.scroll){case"left":a.scrollLeft-=t;break;case"right":a.scrollLeft+=t}e.preventDefault()});$(".main-navbar .dropdown").on("show.bs.dropdown",function(){var e=document.querySelector(".main-navbar .navbar-collapse").scrollLeft;this.querySelector(".dropdown-menu").style.marginLeft=-e+"px"})}}(),featherIcon:()=>{feather.replace()},todo:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="todo-item"]')){const t=e.target.closest('[data-toggle="todo-item"]'),a=t.closest(".todo-item");t.checked?a.classList.add("done"):a.classList.remove("done")}})}(),fixFlatpickr:()=>function(){document.addEventListener("wheel",function(){document.activeElement.classList.contains("cur-year")&&document.activeElement.blur()})}(),summernoteFocus:()=>function(){$(document).on("summernote.focus",".summernote",function(){$(this).next().addClass("focus")}).on("summernote.blur",".summernote",function(){$(this).next().removeClass("focus")})}(),toast:e=>function(e){var t=void 0!==e.animation?e.animation:"true",a=void 0!==e.autohide?e.autohide:"true",o=void 0!==e.position?e.position:"top-right";const n=".toast-wrapper."+o;var s=void 0!==e.delay?e.delay:2e3,i="toast"+Date.now();let r="";switch(e.icon){case"success":r='<svg class="mr-2 text-success" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>';break;case"warning":r='<svg class="mr-2 text-warning" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>';break;case"error":r='<svg class="mr-2 text-danger" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>';break;default:r='<svg class="mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>'}e=`
      <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" id="${i}" data-autohide="${a}" data-animation="${t}" data-delay="${s}">
        <div class="toast-header">
          ${r}
          <strong>${e.title}</strong>
          <button type="button" class="close ml-auto" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body">${e.text}</div>
      </div>
    `,document.querySelector(n)||document.body.insertAdjacentHTML("beforeend",`<div class="toast-wrapper ${o}"></div>`),document.querySelector(n).insertAdjacentHTML("beforeend",e),$("#"+i).toast("show"),$("#"+i).on("hidden.bs.toast",function(){this.remove(),document.querySelectorAll(n+" .toast").length<1&&document.querySelector(n).remove()})}(e),autowidth:()=>function(){function e(e,t){const a=e.value||e.getAttribute("placeholder")||"";t.innerHTML=a.replace(/ /g,"&nbsp;"),e.style.setProperty("width",Math.ceil(window.getComputedStyle(t).width.replace("px",""))+1+"px","important")}document.querySelectorAll(".autowidth-hidden").length&&document.querySelectorAll(".autowidth-hidden").forEach(e=>e.remove());for(const a of document.querySelectorAll(".autowidth")){const o=document.createElement("div");o.classList.add("autowidth-hidden");var t=window.getComputedStyle(a);o.style.fontFamily=t.fontFamily,o.style.fontSize=t.fontSize,o.style.fontStyle=t.fontStyle,o.style.fontWeight=t.fontWeight,o.style.letterSpacing=t.letterSpacing,o.style.textTransform=t.textTransform,o.style.borderLeftWidth=t.borderLeftWidth,o.style.borderRightWidth=t.borderRightWidth,o.style.paddingLeft=t.paddingLeft,o.style.paddingRight=t.paddingRight,document.body.appendChild(o),e(a,o),a.classList.contains("inputmask")?a.oninput=()=>e(a,o):a.addEventListener("input",()=>e(a,o))}}(),togglePassword:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="password"]')){const t=e.target.closest('[data-toggle="password"]').parentNode.querySelector("input");t.type="password"===t.type?"text":"password"}})}(),bootstrapSelect:()=>function(){function t(e,t){t.style.display=""==e.value?"none":"inline";const a=e.parentNode.querySelector(".filter-option");""==e.value?a.classList.remove("mr-4"):a.classList.add("mr-4")}$(document).on("show.bs.select",".bootstrap-select",function(){this.querySelector(".dropdown-toggle").classList.add("focus")}).on("hide.bs.select",".bootstrap-select",function(){this.querySelector(".dropdown-toggle").classList.remove("focus")});for(const a of document.querySelectorAll("select.bs-select")){let e={style:"btn"};"true"===a.dataset.bsSelectCreatable&&(e.liveSearch=!0,e.noneResultsText="Press Enter to add: <b>{0}</b>"),a.dataset.bsSelectSize&&(e.style="btn btn-"+a.dataset.bsSelectSize,a.classList.add("form-control-"+a.dataset.bsSelectSize)),"true"===a.dataset.bsSelectClearable&&a.insertAdjacentHTML("afterend",'<span class="bs-select-clear"></span>'),$(a).selectpicker(e);const o=a.closest(".bootstrap-select");if("true"===a.dataset.bsSelectCreatable){const s=o.querySelector(".bs-searchbox .form-control");s.addEventListener("keyup",function(e){if(o.querySelector(".no-results")&&13===e.keyCode){a.insertAdjacentHTML("afterbegin",`<option value="${this.value}">${this.value}</option>`);let e=$(a).val();Array.isArray(e)?e.push(this.value):e=this.value,$(a).val(e),$(a).selectpicker("toggle"),$(a).selectpicker("refresh"),$(a).selectpicker("render"),o.querySelector(".dropdown-toggle").focus(),this.value=""}})}const n=a.parentNode.nextElementSibling;n&&n.classList.contains("bs-select-clear")&&(t(a,n),a.addEventListener("change",()=>t(a,n)),n.addEventListener("click",()=>{$(a).selectpicker("val",""),a.dispatchEvent(new Event("change"))}))}}(),select2:()=>function(){for(const t of document.querySelectorAll(".select2")){let e={width:"100%",minimumResultsForSearch:"Infinity"};t.dataset.select2Search&&"true"===t.dataset.select2Search&&delete e.minimumResultsForSearch,t.dataset.select2Content&&"true"===t.dataset.select2Content&&(e.templateResult=e=>e.id?$(e.element.dataset.content):e.text,e.templateSelection=e=>e.id?$(e.element.dataset.content):e.text),$(t).select2(e).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(e){$(this).data("unselecting")&&($(this).removeData("unselecting"),e.preventDefault())})}}(),inputClearable:()=>function(){document.addEventListener("click",e=>{e.target.closest('[data-toggle="clear"]')&&(e.target.closest('[data-toggle="clear"]').previousElementSibling.value="")})}()}})();$(()=>{$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip(),feather.replace()}),Theme.treeview(),Theme.toggleSidebar(),Theme.autofocusModal(),Theme.customFileInput(),Theme.cardToolbar(),Theme.navSection(),Theme.accordionActive(),Theme.dropdownHover(),Theme.checkAll(),Theme.backgroundCover(),Theme.innerToggleSidebar(),Theme.scrollNavbar(),Theme.featherIcon(),Theme.todo(),Theme.fixFlatpickr(),Theme.summernoteFocus(),Theme.togglePassword(),Theme.inputClearable();const observer=new MutationObserver(()=>{Theme.backgroundCover(),Theme.navSection(),Theme.accordionActive(),$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip()});document.querySelector(".main")&&(observer.observe(document.querySelector(".main"),{childList:!0,subtree:!0}),observer.observe(document.querySelector(".sidebar"),{childList:!0,subtree:!0}));const blue=Theme.color("blue"),indigo=Theme.color("indigo"),purple=Theme.color("purple"),pink=Theme.color("pink"),red=Theme.color("red"),orange=Theme.color("orange"),yellow=Theme.color("yellow"),green=Theme.color("green"),teal=Theme.color("teal"),cyan=Theme.color("cyan"),gray=Theme.color("gray"),lime="#cddc39";(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports)module.exports=t(require("jquery"));else window.toastr=t(window.jQuery)})(["jquery"],function(C){return function(){var g,t,f,v=0,o="error",n="info",s="success",i="warning",e={clear:function(e,t){var a=y();g||$(a);r(e,a,t)||function(e){for(var t=g.children(),a=t.length-1;0<=a;a--)r(C(t[a]),e)}(a)},remove:function(e){var t=y();g||$(t);e&&0===C(":focus",e).length?w(e):g.children().length&&g.remove()},error:function(e,t,a){return l({type:o,iconClass:y().iconClasses.error,message:e,optionsOverride:a,title:t})},getContainer:$,info:function(e,t,a){return l({type:n,iconClass:y().iconClasses.info,message:e,optionsOverride:a,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,a){return l({type:s,iconClass:y().iconClasses.success,message:e,optionsOverride:a,title:t})},version:"2.1.4",warning:function(e,t,a){return l({type:i,iconClass:y().iconClasses.warning,message:e,optionsOverride:a,title:t})}};return e;function $(e,t){return e=e||y(),(g=C("#"+e.containerId)).length||t&&(e=e,(g=C("<div/>").attr("id",e.containerId).addClass(e.positionClass)).appendTo(C(e.target))),g}function r(e,t,a){a=!(!a||!a.force)&&a.force;return e&&(a||0===C(":focus",e).length)&&(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){w(e)}}),1)}function b(e){t&&t(e)}function l(t){var n=y(),e=t.iconClass||n.iconClass;if(void 0!==t.optionsOverride&&(n=C.extend(n,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===f)return!0;f=t.message}return!1}(n,t)){v++,g=$(n,!0);var s=null,i=C("<div/>"),a=C("<div/>"),o=C("<div/>"),r=C("<div/>"),l=C(n.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:v,state:"visible",startTime:new Date,options:n,map:t};return t.iconClass&&i.addClass(n.toastClass).addClass(e),function(){{var e;t.title&&(e=t.title,n.escapeHtml&&(e=u(t.title)),a.append(e).addClass(n.titleClass),i.append(a))}}(),function(){{var e;t.message&&(e=t.message,n.escapeHtml&&(e=u(t.message)),o.append(e).addClass(n.messageClass),i.append(o))}}(),n.closeButton&&(l.addClass(n.closeClass).attr("role","button"),i.prepend(l)),n.progressBar&&(r.addClass(n.progressClass),i.prepend(r)),n.rtl&&i.addClass("rtl"),n.newestOnTop?g.prepend(i):g.append(i),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}i.attr("aria-live",e)}(),i.hide(),i[n.showMethod]({duration:n.showDuration,easing:n.showEasing,complete:n.onShown}),0<n.timeOut&&(s=setTimeout(p,n.timeOut),d.maxHideTime=parseFloat(n.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,n.progressBar&&(d.intervalId=setInterval(function(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;r.width(e+"%")},10))),function(){n.closeOnHover&&i.hover(m,h);!n.onclick&&n.tapToDismiss&&i.click(p);n.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),n.onCloseClick&&n.onCloseClick(e),p(!0)});n.onclick&&i.click(function(e){n.onclick(e),p()})}(),b(c),n.debug&&console&&console.log(c),i}function u(e){return(e=null==e?"":e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(e){var t=e&&!1!==n.closeMethod?n.closeMethod:n.hideMethod,a=e&&!1!==n.closeDuration?n.closeDuration:n.hideDuration,o=e&&!1!==n.closeEasing?n.closeEasing:n.hideEasing;if(!C(":focus",i).length||e)return clearTimeout(d.intervalId),i[t]({duration:a,easing:o,complete:function(){w(i),clearTimeout(s),n.onHidden&&"hidden"!==c.state&&n.onHidden(),c.state="hidden",c.endTime=new Date,b(c)}})}function h(){(0<n.timeOut||0<n.extendedTimeOut)&&(s=setTimeout(p,n.extendedTimeOut),d.maxHideTime=parseFloat(n.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function m(){clearTimeout(s),d.hideEta=0,i.stop(!0,!0)[n.showMethod]({duration:n.showDuration,easing:n.showEasing})}}function y(){return C.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function w(e){g=g||$(),e.is(":visible")||(e.remove(),e=null,0===g.children().length&&(g.remove(),f=void 0))}}()});var app={inProgress:!1,setProgress:function(e){(app.inProgress=e)?($(".btn-progress").each(function(){var e=$(this);e.attr("data-orig-caption")||e.attr("data-orig-caption",e.html()),e.html('<i class="fas fa-circle-notch fa-spin"></i>')}),$(".card-progress").removeClass("d-none").show(),$("#ajax-modal .modal-footer .btn").attr("disabled","disabled").addClass("disabled")):($(".btn-progress").each(function(){var e=$(this);e.html(e.attr("data-orig-caption")).removeAttr("disabled").removeAttr("data-orig-caption")}),$("#ajax-modal .modal-footer .btn").removeAttr("disabled").removeClass("disabled"),$(".card-progress").hide())},reloadTimeline:function(e){$.ajax({url:"/ajax/timeline/reload/?fid="+e,data:{},success:function(e){processJSONResponse(e)}})},clearConnectedSelect:function(e){$(e).prop("disabled",!0).find("optgroup, option").remove().html(""),void 0!==$(e).data("connected-select")&&(e=$($(e).data("connected-select")),app.clearConnectedSelect(e))},updateConnectedSelects:function(e,n){$(e).each(function(e,t){var a,o=$(t);app.clearConnectedSelect(o),"0"!==n&&(a={},(a=o.data("params")?o.data("params"):a).id=n,void 0!==(t=o.data("fields"))&&$(t).each(function(){a[$(this).prop("name")]=$(this).val()}),$.ajax({url:"/ajax/lists/"+o.data("list")+"/",data:a,success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),app.fillConnectedSelect(o,e)}}))})},fillConnectedSelect:function(e,t){var a=$(e),o=a.data("default-value")||0,e=a.data("default-select-first")||!1,n=!1,s=!1,i=!1,r="",l="";a.data("empty-option")&&(r+='<option value="0">'+a.data("empty-option")+"</option>"),t&&$.each(t,function(e,t){i=!1,t.groupId!==n&&t.groupId&&(n&&(r+="</optgroup>",n=!1),r+='<optgroup label="'+t.groupName+'">',n=t.groupId),t.id&&(Array.isArray(o)?-1!==o.indexOf(t.id)&&(i=s=!0):t.id==o&&(i=s=!0),t.data&&(l="",$.each(t.data,function(e,t){l+=" data-"+e+'="'+t+'"'})),r+='<option value="'+t.id+'"'+(i?' selected="selected"':"")+l+(t.style?' style="'+t.style+'"':"")+(t.class?' class="'+t.class+'"':"")+">"+t.text+"</option>")}),n&&(r+="</optgroup>"),a.append(r),a.removeAttr("disabled"),!s&&e&&a.find("option").first().prop("selected",!0),a.hasClass("select-picker")&&a.selectpicker("refresh"),a.trigger("change")},initControls:function(){$(document).on("click",".checkbox-highlight input",function(){var e=$(this),t=e.parents(".checkbox-highlight"),a=t.data("active")||"",o=t.data("inactive")||"";e.is(":checked")?(""!=o&&t.removeClass(o),""!=a&&t.addClass(a)):(""!=o&&t.addClass(o),""!=a&&t.removeClass(a))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){$("input[name="+$(e.target).parent().attr("id")+"]").val($(e.target).attr("href").replace("#",""))}),$(document).on("click",".btn-modal-submit",function(){$(this).parents(".modal-content").find("form").submit()}),$(document).on("keyup",".alphanumeric-only",function(){this.value=this.value.replace(/[^a-z0-9]/gi,"")}),$(document).on("blur",".alphanumeric-only",function(){this.value=this.value.replace(/[^a-z0-9]/gi,"")}),$(document).on("blur",".time-format",function(){var e=$(this),t=e.val();e.val(moment(t.toString(),"LT").format("HH:mm"))}),$(document).on("keyup",".numbersonly",function(){var e=$(this).data("chars"),t=$(this).data("replace-from"),a=$(this).data("replace-to");t&&a&&(this.value=this.value.replace(t,a)),""!==e&&void 0!==e||(e="\\-.,");e=new RegExp("[^0-9"+e+"]","ig");this.value=this.value.replace(e,"")}),$(document).on("blur",".numbersonly",function(){var e=$(this).data("chars");""!==e&&void 0!==e||(e="\\-.,");e=new RegExp("[^0-9"+e+"]","ig");this.value=this.value.replace(e,"")}),$(".btn-insert-text").on("click",function(){var e=$(this),t=e.parents("fieldset").find(".htmleditor");t.summernote("editor.saveRange"),t.summernote("editor.restoreRange"),t.summernote("editor.focus"),t.summernote("editor.insertText",e.html())}),$(document).on("change",".change-currency-sign",function(){var e=$(this);"0"!=e.val()&&(e=e.find("option:selected").text(),$(".has-currency-sign").parents(".input-group").find(".input-group-text").html(e))}),$(document).on("change",".change-state-on-change",function(){var a=$(this),e=a.data("enable-fields"),t=a.data("disable-fields"),o=a.data("enable-value"),n=a.data("disable-value"),s=a.data("readonly-fields"),i=a.data("readonly-value"),r=a.data("visible-ids"),l=a.data("visible-value");e&&$(e).each(function(e,t){a.val()==o?$(t).removeAttr("disabled"):$(t).attr("disabled","disabled")}),t&&$(t).each(function(e,t){a.val()==n?$(t).attr("disabled","disabled"):$(t).removeAttr("disabled")}),s&&$(s).each(function(e,t){a.val()==i?$(t).removeAttr("readonly"):$(t).attr("readonly","readonly")}),r&&$(r).each(function(e,t){a.val()==l?$(t).removeClass("d-none").show():$(t).hide()})}),$(document).on("change",".change-state",function(){var a,e=$(this),t=e.data("stateOptions"),o=!1;t&&(a=!this.type||"checkbox"!==this.type&&"radio"!==this.type?e.val():e.is(":checked")?1:0,$.each(t,function(e,t){e==a&&(o=!0,$.each(t,function(e,t){"show"===e?$(t).removeClass("d-none").show():"hide"===e?$(t).hide():"disable"===e?$(t).attr("disabled","disabled"):"enable"===e?$(t).removeAttr("disabled"):"readonly"===e?$(t).attr("readonly","readonly"):"editable"===e?$(t).removeAttr("readonly"):"value"===e&&$(t.el).val(t.val).trigger("change")}))}),o||(e=e.data("stateDefault"))&&$.each(e,function(e,t){"show"===e?$(t).removeClass("d-none").show():"hide"===e?$(t).hide():"disable"===e?$(t).attr("disabled","disabled"):"enable"===e?$(t).removeAttr("disabled"):"readonly"===e?$(t).attr("readonly","readonly"):"editable"===e?$(t).removeAttr("readonly"):"value"===e&&$(t.el).val(t.val)}))}),$('[data-toggle="tooltip"]').tooltip(),$("table.user_level_rights input:checkbox").on("click",function(e){var t=$(this),a=t.attr("data-usergroup"),o=t.attr("data-role"),n=t.attr("data-page"),s=(s=t.attr("data-function"))||"";$.ajax({url:"/ajax/accessrights/",data:"usergroup="+a+"&role="+o+"&page="+n+"&function="+s+"&checked="+(t.is(":checked")?1:0)})}),$("table.user_level_rights .btn-accesslevel").on("click",function(e){var t=$(this),a=t.closest(".btn-group").find("button"),o=t.attr("data-value"),n=t.attr("data-color"),s=t.attr("data-ico"),i=t.closest(".btn-group").attr("data-usergroup"),r=t.closest(".btn-group").attr("data-role"),t=t.closest(".btn-group").attr("data-page"),l=a.attr("data-ico"),d=a.attr("data-color");$.ajax({url:"/ajax/accessrights/",data:"usergroup="+i+"&role="+r+"&page="+t+"&value="+o,success:function(e){a.toggleClass("btn-"+n+" btn-"+d).attr("data-color",n).attr("data-ico",s),a.find("i").toggleClass("fa-"+s+" fa-"+l)}})}),$('[data-toggle="accept"]').on("click",function(){var e=$(this);e.is(":checked")?e.parents("form").find(".btn-accept").removeAttr("disabled"):e.parents("form").find(".btn-accept").attr("disabled","disabled")}),$(".upload-profile-img").on("click",function(e){e.preventDefault(),$("#fileInput:hidden").trigger("click")}),$(".delete-profile-img").on("click",function(e){e.preventDefault(),$.ajax({url:"/ajax/fileupload/delete-profile-img/",success:function(e){processJSONResponse(e)}})}),$("#fileInput").on("change",function(){var e=$(this).val();if(!/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(e))return app.showMessage({type:"warning",message:"Hibás fájltípus! Engedélyezett fájltípusok: jpg, png, gif"}),$("#fileInput").val(""),!1;$("#img-upload-form").submit()}),$("#img-upload-form").on("submit",function(e){var t=$(this);e.preventDefault(),$.ajax({url:t.attr("action"),type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){processJSONResponse(e)},error:function(e){app.showMessage({type:"error",message:"Invalid file."})}})}),$(".chk-notification").on("click",function(e){var t=$(this),a=parseInt(t.data("id")),o=t.data("type"),n=parseInt(t.data("uid")),t=t.is(":checked")?1:0;$.ajax({url:"/ajax/subscribe-notification/",data:"id="+a+"&type="+o+"&uid="+n+"&value="+t,success:function(e){}})}),jQuery().select2&&$(".select2:not(.inited)").addClass("inited").select2(),jQuery().selectpicker&&$(".select-picker:not(.inited)").addClass("inited").selectpicker(),0<$(".htmleditor").length&&$(".htmleditor").summernote({height:300,toolbar:[["edit",["undo","redo"]],["font",["bold","italic","underline","fontsize","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["insert",["table","link","gallery","video"]],["misc",["fullscreen","codeview"]],["cleaner",["cleaner"]]],cleaner:{action:"both",newline:"<br>",notStyle:"position:hidden;top:0;left:0;right:0",icon:'<i class="fa fa-eraser"></i>',keepHtml:!1,keepOnlyTags:["<p>","<br>","<ul>","<li>","<b>","<strong>","<i>","<a>"],keepClasses:!1,badTags:["style","script","applet","embed","noframes","noscript","html"],badAttributes:["style","start","class"],limitChars:!1,limitDisplay:"none",limitStop:!1},callbacks:{onInit:function(){$(this).data("image_dialog_images_url","/ajax/gallery-content/"),$(this).data("image_dialog_title","")}}}),$(".btn-notification").on("click",function(){var e=$(this),t=e.data("url"),a=parseInt(e.data("id"));e.removeClass("note-new"),e.parent().addClass("viewed"),$.ajax({url:"/ajax/notifications/viewed/",data:"id="+a,success:function(e){processJSONResponse(e),t&&(window.location=t)}})}),initInfiniteScroll(),this.reInit()},reInit:function(){jQuery().select2&&$(".select2:not(.inited)").addClass("inited").select2(),jQuery().selectpicker&&$(".select-picker:not(.inited)").addClass("inited").selectpicker(),$.fn.parsley&&$(".parsley-form:not(.inited)").each(function(){$(this).addClass("inited"),$(this).parsley({trigger:"change",errorClass:"",successClass:"",errorsWrapper:"<div></div>",errorTemplate:'<label class="error"></label>'}).on("field:success",function(e){e.$element.parents(".form-group").removeClass("has-error")}).on("field:error",function(e){e.$element.parents(".form-group").removeClass("has-success").addClass("has-error"),app.setProgress(!1)})}),$("input.tagsinput:not(.inited)").each(function(){$(this).addClass("inited"),$(this).tagsinput({trimValue:!0,freeText:!0}),$(this).tagsinput("input").attr("data-parsley-ui-enabled","false").on("blur",function(){$(this).val()&&($(this).parent().parent().find(".tagsinput").tagsinput("add",$(this).val()),$(this).val(""))})}),$("select.tagsinput:not(.inited)").each(function(){$(this).addClass("inited"),$(this).tagsinput({itemValue:"id",itemText:"label"}),$(this).find("option").each(function(){$(this).parent().tagsinput("add",{id:$(this).attr("value"),label:$(this).html()})}),$(this).tagsinput("input").parent().addClass("bootstrap-tagsinput-fullwidth"),$(this).tagsinput("input").attr("data-list-url",$(this).attr("data-list-url")).attr("data-scope",$(this).attr("data-scope")).addClass("catselautocomplete")}),$(".autocomplete:not(.inited)").each(function(){var o=$(this);o.addClass("inited");var n={},s=!1,i=o.attr("id"),a=parseInt(o.data("addnew"))||0,r=o.data("insertfields")||!1,l=o.data("searchfields")||!1,d=o.data("callback")||!1,c=o.data("clearonselect")||!1,u="/ajax/lists/"+(o.data("list")||"")+"/";o.autoComplete({resolver:"custom",minLength:0,preventEnter:!0,events:{search:function(e,t){(n={}).q=e,l&&$(l).each(function(e,t){n[$(t).attr("id")]=$(t).val()}),$.ajax(u,{data:n}).done(function(e){e.results&&t(e.results)})}}}),o.on("focus",function(){o.autoComplete("show")}),o.on("change",function(){s=!0}),o.on("keyup",function(e){13===e.keyCode&&(e.preventDefault(),s=!0,o.trigger("autocomplete.freevalue",[o.val()]))}),o.on("autocomplete.select",function(e,t){var a;$("#"+i+"-id").val(t.id),s=!1,(n={}).id=t.id,n.action="count",$.ajax(u,{data:n}),!d||"function"==typeof(a=window[d])&&(console.log("call function"),(n={}).id=t.id,r&&$(r).each(function(e,t){n[$(t).attr("id")]=$(t).val()}),a.call(null,t)),c&&(o.autoComplete("clear"),$("#"+i+"-id").val(0))}),o.on("autocomplete.freevalue",function(e,t){a?s&&""!==t&&(s=!1,(n={}).value=t,n.action="add",r&&$(r).each(function(e,t){n[$(t).attr("id")]=$(t).val()}),$.ajax(u,{data:n}).done(function(e){var t;e.id&&($("#"+i+"-id").val(e.id),!d||"function"==typeof(t=window[d])&&((n={}).id=e.id,r&&$(r).each(function(e,t){n[$(t).attr("id")]=$(t).val()}),t.call(null,n)))})):$("#"+i+"-id").val(0),c&&(o.autoComplete("clear"),$("#"+i+"-id").val(0))})}),$(".catselautocomplete:not(.inited)").each(function(){var e=$(this),t=e.attr("data-list-url"),a=e.attr("data-scope")||0;e.addClass("inited"),e.catselcomplete({minLength:2,source:function(e,n){$.ajax({url:t,dataType:"jsonp",data:{query:e.term,scope:a},success:function(e){var t,a={};for(t in e){var o=e[t];void 0!==o.categoryid&&void 0===a[o.categoryid]&&(a[o.categoryid]={value:o.categoryid,label:o.category,category:o.category,categorycode:o.categoryid,class:"ui-autocomplete-category"}),o.id!==o.categoryid&&(a[o.id]={value:o.id,label:o.label,category:o.category,categorycode:o.categoryid,class:"ui-menu-item"})}n(a)}})},focus:function(e,t){return $(this).parent().hasClass("bootstrap-tagsinput")||($(this).val(t.item.label),$("#"+this.id+"-id").val(t.item.value)),!1},select:function(e,t){return $(this).parent().hasClass("bootstrap-tagsinput")?($(this).parent().next().tagsinput("add",{id:t.item.value,label:t.item.label}),$(this).val("")):($(this).val(t.item.label),$("#"+this.id+"-id").val(t.item.value)),!1}}).focusout(function(){$(this).parent().hasClass("bootstrap-tagsinput")||""==$(this).val()&&$("#"+this.id+"-id").val("")})}),$.fn.datepicker&&($(".datepicker:not(.inited)").each(function(){var e=$(this);e.addClass("inited");var t,a=e.attr("data-language")||"en",o=parseInt(e.attr("data-firstday")||1),n=e.attr("data-dateformat")||"yy-mm-dd",s=parseInt(e.attr("data-calendars")||1),i=e.attr("data-change-year")||"false",r="true"===(r=e.attr("data-change-month")||"true");t=(i="true"===i)&&e.attr("data-year-range")||"c-10:c+10";var l=e.attr("data-min-date")||"",d=e.attr("data-max-date")||"",c=e.attr("data-open")||!1,u=e.attr("data-datelimit-min")||!1,p=e.attr("data-datelimit-max")||!1,h=e.attr("data-range-from")||!1,m=e.attr("data-range-to")||!1;e.datepicker($.extend({},$.datepicker.regional[a],{firstDay:o,dateFormat:n,numberOfMonths:s,changeMonth:r,changeYear:i,yearRange:t,minDate:l,maxDate:d,prevText:"",nextText:"",beforeShowDay:function(e){var t,a;m&&$("#"+m)?(t=$.datepicker.parseDate(n,$(this).val()),a=$.datepicker.parseDate(n,$("#"+m).val())):h&&$("#"+h)&&(t=$.datepicker.parseDate(n,$("#"+h).val()),a=$.datepicker.parseDate(n,$(this).val()));var o="";return t&&e.getTime()===t.getTime()&&(o+=" dp-range-start"),a&&e.getTime()===a.getTime()&&(o+=" dp-range-end"),[!0,t&&a&&t<=e&&e<=a?"dp-highlight"+o:o]},onClose:function(e){u&&$("#"+u)&&$("#"+u).datepicker("option","minDate",e),p&&$("#"+p)&&$("#"+p).datepicker("option","maxDate",e),c&&$("#"+c)&&""!=e&&$("#"+c).datepicker("show")},onSelect:function(e,t){$(this).trigger("onblur"),$(this).trigger("change")}}))}),$("body").hasClass("datepicker-inited")||($("body").addClass("datepicker-inited"),$("body").on("mouseenter","#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)",function(){var a,o,n,s,i,r,l;0<$(".ui-datepicker-calendar .dp-range-start, .ui-datepicker-calendar .dp-range-end").length&&($(this).addClass("dp-state-hover"),o=a=!1,0<$(".ui-datepicker-calendar .dp-range-start.dp-range-end .ui-state-active").length?o=!0:0<$(".ui-datepicker-calendar .dp-range-start .ui-state-active").length?a=!0:0<$(".ui-datepicker-calendar .dp-range-end .ui-state-active").length||!a&&0<$(".ui-datepicker-calendar .dp-range-start").length?o=!0:!o&&0<$(".ui-datepicker-calendar .dp-range-end").length&&(a=!0),$(".ui-datepicker-calendar .dp-range-start").addClass("dp-range-start-h").removeClass("dp-range-start"),$(".ui-datepicker-calendar .dp-range-end").addClass("dp-range-end-h").removeClass("dp-range-end"),$(".ui-datepicker-calendar .dp-highlight").addClass("dp-highlight-h").removeClass("dp-highlight"),$(".ui-datepicker-calendar .ui-state-active").addClass("ui-state-active-h").removeClass("ui-state-active"),l=r=i=s=n=!1,$("#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)").each(function(e,t){$(t).hasClass("dp-state-hover")&&(n=!0),!(s=$(t).hasClass("dp-range-start-h")?!0:s)&&$(t).hasClass("dp-highlight-h")&&(s=!0,o?r=!0:a=!0),$(t).hasClass("dp-range-end-h")&&(i=!0),r?l||(a&&!i||o&&!n?$(t).addClass("dp-hover"):(l=!0,$(t).addClass("dp-hover-end"))):(a&&n&&!i&&(r=!0,$(t).addClass("dp-hover-start")),o&&s&&!n&&(r=!0,$(t).addClass("dp-hover-start")))}))}),$("body").on("mouseleave","#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)",function(){$("#ui-datepicker-div .ui-datepicker-calendar td").removeClass("dp-hover dp-state-hover dp-hover-start dp-hover-end"),$(".ui-datepicker-calendar .dp-range-start-h").addClass("dp-range-start").removeClass("dp-range-start-h"),$(".ui-datepicker-calendar .dp-range-end-h").addClass("dp-range-end").removeClass("dp-range-end-h"),$(".ui-datepicker-calendar .dp-highlight-h").addClass("dp-highlight").removeClass("dp-highlight-h"),$(".ui-datepicker-calendar .ui-state-active-h").addClass("ui-state-active").removeClass("ui-state-active-h")}))),$(".connected-select:not(.cs-inited)").each(function(){$(this).addClass("cs-inited").on("change",function(){var e=$(this);app.updateConnectedSelects(e.data("connected-select"),e.val())}),"0"!==$(this).val()&&null!==$(this).val()&&$(this).trigger("change")}),$(".change-state-on-change").trigger("change"),$(".change-state").not(".skip-init").trigger("change");var e=$("input.file[type=file]");e.length&&e.fileinput(),$(".img-zoom").zoom(),"function"==typeof autosize&&autosize($("textarea.autosize"))},initModals:function(){$("#ajax-modal").on("show.bs.modal",function(e){var t="",a=$(this);e.relatedTarget&&((e=$(e.relatedTarget)).data("size")&&$("#ajax-modal .modal-dialog").addClass("modal-"+e.data("size")),"#"!=e.attr("href")&&""!=e.attr("href")?t=e.attr("href"):e.data("href")&&(t=e.data("href"))),""!=t&&a.find(".modal-content").load(t)}),$("#ajax-modal").on("hidden.bs.modal",function(e){$(e.target).removeData("bs.modal"),$("#ajax-modal .modal-dialog").removeClass("modal-sm modal-lg modal-xl"),$("#ajax-modal .modal-content").html(""),$.ajax({url:"/ajax/cleanup/"})}),$("#confirm-delete").on("show.bs.modal",function(e){e.stopPropagation();var t=$(this).find(".danger"),a=$(e.relatedTarget).data("color");t.removeClass("btn-primary btn-secondary btn-info btn-success btn-warning btn-danger"),$("#confirm-delete").removeClass("modal-outline-warning modal-outline-success modal-outline-primary modal-outline-info modal-outline-danger modal-outline-secondary"),$("#confirm-delete .modal-header").removeClass("bg-warning bg-success bg-primary bg-info bg-danger bg-secondary"),$("#confirm-delete .modal-content").removeClass("brc-danger-m2 brc-warning-m2 brc-success-m2 brc-primary-m2 brc-info-m2 brc-secondary-m2"),a?(t.addClass("btn-"+a),$("#confirm-delete").addClass("modal-outline-"+a),$("#confirm-delete .modal-header").addClass("bg-"+a),$("#confirm-delete .modal-content").addClass("brc-"+a+"-m2")):(t.addClass("btn-danger"),$("#confirm-delete").addClass("modal-outline-danger"),$("#confirm-delete .modal-header").addClass("bg-danger"),$("#confirm-delete .modal-content").addClass("brc-danger-m2")),null!=$(e.relatedTarget).data("href")?(t.data("href",$(e.relatedTarget).data("href")),t.on("click",function(){document.location=$(this).data("href")})):null!=$(e.relatedTarget).data("confirm-action")&&t.attr("onclick",$(e.relatedTarget).data("confirm-action")),null!=$(e.relatedTarget).data("confirm-button")?t.html($(e.relatedTarget).data("confirm-button")):t.html(t.data("default-caption")),null!=$(e.relatedTarget).data("title")?$("#confirm-delete .modal-title").html($(e.relatedTarget).data("title")):$("#confirm-delete .modal-title").html($("#confirm-delete .modal-title").data("default-title")),$(".confirm-question").html($(e.relatedTarget).data("confirm-question")),$(".debug-data").html($(e.relatedTarget).data("confirm-data"))}),$("#confirm-delete").on("hidden.bs.modal",function(){$(".modal-footer .btn:not(.btn-approve), .modal-header button").show(),$(".modal-footer .modal-loader").remove(),$("#ajax-modal").hasClass("in")&&$("body").addClass("modal-open")}),$(document).on("focus",".input-group > input, .input-group > select",function(e){$(this).parents(".input-group").addClass("input-group-focus")}).on("blur",".input-group > input, .input-group > select",function(e){$(this).parents(".input-group").removeClass("input-group-focus")})},showMessage:function(e){switch(toastr.options.progressBar=!0,toastr.options.closeButton=!0,e.type){case"warning":toastr.warning(e.message);break;case"error":toastr.error(e.message);break;case"success":toastr.success(e.message);break;case"info":default:toastr.info(e.message)}},showMessages:function(){"undefined"!=typeof _messages&&$.each(_messages,function(e,t){app.showMessage(t)})},initToaster:function(){setTimeout(function(){app.showMessages()},500)},checkLoginStatus:function(e){},init:function(){this.initControls(),this.initModals(),this.initToaster()}};function postModalForm(e,t,a){t=t||1,a=a||"save";var o=$(e).attr("id").substring(0,$(e).attr("id").length-5),n=new FormData($(e).get(0));n.append(o+"["+a+"]",t),app.setProgress(!0),$.ajax({type:"POST",url:$(e).attr("action"),data:n,cache:!1,processData:!1,contentType:!1,success:function(e){$("#confirm-delete").modal("hide"),e&&(processJSONResponse(e),app.setProgress(!1),app.reInit())}})}function modalFormPageRefresh(e){$("#ajax-modal").modal("hide");var t=$("form");0<t.length?((t=t.first()).append('<input type="hidden" name="modalform" value="'+e+'" />'),t.hasClass("parsley-form")&&t.parsley().destroy(),t.submit()):-1<window.location.href.indexOf("?")?window.location.href+="&modalform="+e:window.location.href+="?modalform="+e}function modalFormPageUpdate(e){$("#ajax-modal").modal("hide"),e&&processJSONResponse(e="object"!=typeof e?JSON.parse(e):e)}function fillValues(e){e.fill&&$.each(e.fill,function(e,t){$(e).val(t)})}function processJSONResponse(e){return"object"!=typeof e&&(e=JSON.parse(e)),$.each(e,function(o,e){$.each(e,function(e,t){var a;"object"==typeof window[o]?"function"==typeof window[o][e]&&window[o][e](t):"show"===e?!0===t?$(o).hide().removeClass("d-none").show():$(o).hide():"tagsinput"===e?$.each(t,function(e,t){t&&$(o).tagsinput("add",t)}):"summernote"===e?($(o).summernote("code",t),crm.isdirty=!1):"addclass"===e?$(o).addClass(t):"removeclass"===e?$(o).removeClass(t):"remove"===e?$(o).remove():"html"===e?$(o).html(t):"closeModal"===e?$(o).modal("hide"):"attr"===e?$.each(t,function(e,t){t?$(o).attr(e,t):$(o).removeAttr(e,"")}):"value"===e?$(o).is(":checkbox")||$(o).is(":radio")?$(o).prop("checked",t):$(o).val(t):"options"===e?($(o).find("option").remove(),$(o).append(t.map(function(e){return'<option value="'+e.id+'">'+e.name+"</option>"}))):"functions"===e?!t.callback||"function"==typeof(a=window[t.callback])&&a(t.arguments):"object"==typeof window[e]&&"function"==typeof window[e][o]&&window[e][o](t)})}),e}function initSortable(){$("#s-l-base").remove(),$(".s-l-opener").remove(),$(".sortableLists").unbind().removeData(),0<$(".sortableLists").length&&$(".sortableLists").sortableLists({maxLevels:2,hintClass:"hint",placeholderClass:"placeholder",ignoreClass:"no-sort",insertZonePlus:!0,opener:{active:!0,as:"html",close:'<i class="far fa-minus-square"></i>',open:'<i class="far fa-plus-square"></i>',openerCss:{width:"18px",height:"18px","margin-left":"-17px","margin-right":"-2px"}},isAllowed:function(e,t,a){return!e.data("category")&&a.data("category")||0===a.length?(t.css("background-color","rgba(27, 185, 52, 0.1)"),!0):(t.css("background-color","rgba(237, 28, 36, 0.1)"),!1)},onChange:function(e){var t=$(e).parents(".sortableLists"),a=t.data("listid"),e=t.data("url");e=e||"/ajax/listHandler/"+t.data("list")+"/sort/",$.ajax({type:"POST",url:e,data:JSON.stringify({listid:a,items:t.sortableListsToArray()}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){processJSONResponse(e)}})}})}function initInfiniteScroll(){0<$(".infinite_scroll").length&&($(window).scroll(function(){var t=$(window).scrollTop()+$(window).height()+400;$(".infinite_scroll:visible:not(.loading)").each(function(){var e;$(this).offset().top<t&&((e=parseInt($(this).data("current")))<parseInt($(this).data("pagenum"))?($(this).addClass("loading"),e=+e+1,$(this).data("current",e),$(this).data("callback")?executeFunctionByName($(this).data("callback"),window,this):$(this).data("url")&&$.ajax({url:$(this).data("url")+e,success:$.proxy(processInfiniteScroll,this)})):$(this).hide())})}),$(window).scroll())}function executeFunctionByName(e,t){for(var a=Array.prototype.slice.call(arguments,2),o=e.split("."),n=o.pop(),s=0;s<o.length;s++)t=t[o[s]];return t[n].apply(t,a)}function processInfiniteScroll(e){$($(this).data("container")).append(e),$(this).removeClass("loading")}function resetInfiniteScroll(e,t){e=$("#"+e);e.removeClass("loading").data("current",1).data("pagenum",t),1<t?e.show():e.hide()}$(function(){$.fn.modal.Constructor.prototype._enforceFocus=function(){},$.fn.extend({insertAtCaret:function(o){return this.each(function(){var e,t,a;document.selection?(this.focus(),document.selection.createRange().text=o,this.focus()):this.selectionStart||"0"==this.selectionStart?(e=this.selectionStart,t=this.selectionEnd,a=this.scrollTop,this.value=this.value.substring(0,e)+o+this.value.substring(t,this.value.length),this.focus(),this.selectionStart=e+o.length,this.selectionEnd=e+o.length,this.scrollTop=a):(this.value+=o,this.focus())}),this}}),app.init()});var tables={inProgress:!1,setProgress:function(e){tables.inProgress=e},sendRequest:function(e,t,a,o){""!==t&&t||(t=0);var n=!1,s=!1,i=$("#table_"+e);tables.setProgress(!0),0<i.length&&(n=i.data("alias"),e=i.data("table"),s=i.data("options"));var r=e+"/"+t+"/";if(4<arguments.length)for(var l=4;l<arguments.length;l++)r+=arguments[l]+"/";$.ajax({method:"GET",url:"/ajax/tables/"+r,data:{alias:n,action:a,params:o,options:s}}).done(function(e){for(var t in e="object"!=typeof e?JSON.parse(e):e)$(t).replaceWith(e[t]);app.reInit(),tables.reInit(),tables.setProgress(!1)})},checkBox:function(e,t,a,o,n){tables.sendRequest(e,t,n="mark"!==n?"check":n,{field:a,value:o})},page:function(e,t,a){tables.sendRequest(e,t,"page",{page:a})},delete:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"delete")},unDelete:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"undelete")},copy:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"copy")},action:function(e,t,a,o){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,a,o)},reloadTable:function(e){tables.reload(e[0],e[1],e[2])},reload:function(e,t,a){(a=void 0===a||a)&&$("#ajax-modal").modal("hide"),tables.sendRequest(e,t,"reload")},initControls:function(){$(document).on("click",".tr-clickable",function(e){var t;$(this).data("modal")?((t=$("#ajax-modal")).find(".modal-dialog").addClass("modal-"+$(this).data("size")),t.find(".modal-content").load($(this).data("href")),t.modal("show")):$(this).data("url")?"self"===$(this).data("target")?document.location=$(this).data("url"):window.open($(this).data("url")):(t=$("a[data-toggle='modal'] i"),$(e.target).is(t)||(window.location.href+=$(this).data("edit")))}),$(".td-clickable").on("click",function(e){var t=$(this).parent("tr").data("url");document.location=t}),$(document).on("click",".btn-table-pager",function(e){var t=$(this),a=t.parents(".pagination").data("table"),o=t.parents(".pagination").data("keyvalues"),n=t.data("page");t.hasClass("disabled")||t.hasClass("active")||tables.page(a,o,n)}),$(document).on("click",".table-options, .table-check",function(e){e.stopImmediatePropagation()}),$(document).on("click",".table-check input[type=checkbox]",function(e){var t=$(this);e.stopImmediatePropagation();e=t.is(":checked")?1:0;tables.checkBox(t.data("table"),t.data("keyvalue"),t.data("field"),e,t.data("method"))})},reInit:function(){},init:function(){this.initControls(),this.reInit()}};$(function(){tables.init()});
//# sourceMappingURL=admin.min.js.map