const Theme=(()=>{"use strict";function t(t,a){const n=[window.innerWidth];return window.addEventListener("resize",()=>{var e=n.length;n.push(window.innerWidth),n[e]!==n[e-1]&&(clearTimeout(a),a=setTimeout(t,150))}),t}function e(e){let t,a,n;switch(e){case"xs":n="d-none d-sm-block";break;case"sm":n="d-block d-sm-none d-md-block";break;case"md":n="d-block d-md-none d-lg-block";break;case"lg":n="d-block d-lg-none d-xl-block";break;case"xl":n="d-block d-xl-none";break;case"smDown":n="d-none d-md-block";break;case"mdDown":n="d-none d-lg-block";break;case"lgDown":n="d-none d-xl-block";break;case"smUp":n="d-block d-sm-none";break;case"mdUp":n="d-block d-md-none";break;case"lgUp":n="d-block d-lg-none"}return t=document.createElement("div"),t.setAttribute("class",n),document.body.appendChild(t),a=null===t.offsetParent,t.parentNode.removeChild(t),a}function s(){return e("lgUp")}var a=.01*window.innerHeight;function n(){document.addEventListener("click",e=>{e.target.closest('[data-toggle="sidebar"]')&&(s()?document.body.classList.toggle("sidebar-collapse"):document.body.classList.toggle("sidebar-expand"),document.querySelector(".sidebar-body").scrollTop=0,window.dispatchEvent(new Event("resize")),e.preventDefault())}),function(){document.body.insertAdjacentHTML("beforeend",'<div class="sidebar-backdrop" id="sidebarBackdrop" data-toggle="sidebar"></div>');const n=document.querySelector(".sidebar");if(n){const o=n.querySelector(".sidebar-body");let t=document.body.classList,a=0,e=!1;o.addEventListener("scroll",function(){e||(a=this.scrollTop)}),document.addEventListener("click",e=>{e.target.closest('[data-toggle="sidebar"]')&&(t.contains("sidebar-collapse")&&!t.contains("sidebar-expand")||(o.scrollTop=a))}),n.addEventListener("mouseenter",()=>{t.contains("sidebar-collapse")&&s()&&(e=!1,o.scrollTop=a)}),n.addEventListener("mouseleave",()=>{t.contains("sidebar-collapse")&&s()&&(e=!0,o.scrollTop=0)})}}()}return document.documentElement.style.setProperty("--vh",`${a}px`),window.addEventListener("resize",()=>{var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)}),{resize:e=>t(e),xs:()=>e("xs"),sm:()=>e("sm"),md:()=>e("md"),lg:()=>e("lg"),xl:()=>e("xl"),smDown:()=>e("smDown"),mdDown:()=>e("mdDown"),lgDown:()=>e("lgDown"),smUp:()=>e("smUp"),mdUp:()=>e("mdUp"),lgUp:()=>s(),treeview:()=>function(){document.addEventListener("click",e=>{if(e.target.closest(".treeview-toggle")){const a=e.target.closest(".treeview-toggle"),n=a.closest("ul"),o=a.closest(".treeview");void 0!==n.dataset.accordion&&n.querySelectorAll(":scope > li > .show").forEach(e=>a!=e&&e.classList.remove("show")),a.classList.toggle("show");var t=a.classList.contains("show")?"treeview:shown":"treeview:hidden";a.dispatchEvent(new Event(t)),o.dispatchEvent(new Event("treeview:updated")),e.preventDefault()}})}(),toggleSidebar:()=>n(),sidebarBodyCustomScrollBar:()=>{new SimpleBar(document.querySelector(".sidebar .sidebar-body"))},autofocusModal:()=>function(){$(document).on("shown.bs.modal",".modal",function(){const e=this.querySelector("[autofocus]");e&&e.focus()})}(),color:e=>getComputedStyle(document.body).getPropertyValue("--"+e).trim(),customFileInput:()=>function(){document.addEventListener("change",t=>{if(t.target.closest(".custom-file-input")){const n=t.target.closest(".custom-file-input");var a=n.dataset.choose||n.nextElementSibling.innerText;n.dataset.choose||(n.dataset.choose=a);t=n.files.length;let e=t?n.files[0].name:a;e=1<t?t+" files":e,n.parentElement.querySelector("label").textContent=e}})}(),cardToolbar:()=>function(){document.addEventListener("click",e=>{if(e.target.closest("[data-action]")){const a=e.target.closest("[data-action]"),n=a.closest(".card");switch(a.dataset.action){case"fullscreen":n.classList.toggle("card-fullscreen"),n.classList.contains("card-fullscreen")?(a.innerHTML='<i class="material-icons">fullscreen_exit</i>',document.body.style.overflow="hidden"):(a.innerHTML='<i class="material-icons">fullscreen</i>',document.body.removeAttribute("style"));break;case"close":n.remove();break;case"reload":n.insertAdjacentHTML("afterbegin",'<div class="card-loader-overlay"><div class="spinner-border text-white" role="status"></div></div>'),n.dispatchEvent(new Event("card:reload"));break;case"collapse":var t=1e3*parseFloat(getComputedStyle(document.querySelector(".collapsing")).transitionDuration);setTimeout(()=>{document.querySelector(a.dataset.target).matches(".collapse.show")?a.innerHTML='<i class="material-icons">remove</i>':a.innerHTML='<i class="material-icons">add</i>'},t)}}})}(),stopCardLoader:e=>{let t=e.querySelector(".card-loader-overlay");t.parentNode.removeChild(t)},navSection:()=>function(){document.querySelector("#navSection")&&($("body").scrollspy("dispose"),$("body").scrollspy({target:"#navSection",offset:140})),document.addEventListener("click",e=>{if(e.target.closest("#navSection")){const a=document.querySelector(e.target.getAttribute("href"));var t=a.getBoundingClientRect().top+window.pageYOffset-((document.body.dataset.offset||140)-1);window.scrollTo({top:t,behavior:"smooth"}),e.preventDefault()}})}(),accordionActive:()=>function(){$(".collapse.show[data-parent]").closest(".card").addClass("active"),$(document).on("show.bs.collapse",".collapse[data-parent]",function(){$(this).closest(".card").addClass("active")}).on("hide.bs.collapse",".collapse[data-parent]",function(){$(this).closest(".card").removeClass("active")})}(),dropdownHover:()=>function(){document.addEventListener("mouseover",e=>{s()&&(e.target.closest(".dropdown-hover")?($(".dropdown-hover").removeClass("show"),e.target.closest(".dropdown-hover").classList.add("show")):$(".dropdown-hover").removeClass("show"))})}(),checkAll:()=>function(){if(document.querySelectorAll(".has-checkAll").length){for(const e of document.querySelectorAll(".has-checkAll")){const n=e.querySelector('th input[type="checkbox"]'),o=e.querySelectorAll('tr > td:first-child input[type="checkbox"]'),s=e.dataset.bulkTarget;let t=e.dataset.checkedClass;t=t||"table-active",n.addEventListener("click",function(){for(const e of o)e.checked=this.checked,e.checked?e.closest("tr").classList.add(t):e.closest("tr").classList.remove(t);s&&a(s,o)});for(const i of o)i.addEventListener("click",function(){this.checked?this.closest("tr").classList.add(t):this.closest("tr").classList.remove(t),s&&a(s,o)})}function a(e,t){let a=0;const n=document.querySelector(e);t.forEach(e=>e.checked&&a++),n.querySelector(".checked-counter")&&(n.querySelector(".checked-counter").textContent=a),0!=a?n.removeAttribute("hidden"):n.setAttribute("hidden","")}}}(),backgroundCover:()=>function(){document.querySelectorAll("[data-cover]").forEach(e=>e.style.backgroundImage=`url(${e.dataset.cover})`)}(),innerToggleSidebar:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="inner-sidebar"]')){const t=e.target.closest('[data-toggle="inner-sidebar"]'),a=document.body;a.classList.toggle("inner-expand"),a.classList.contains("inner-expand")?t.innerHTML='<i class="material-icons">close</i>':t.innerHTML='<i class="material-icons">arrow_forward_ios</i>',e.preventDefault()}})}(),scrollNavbar:()=>function(){if(document.querySelector(".main-navbar")){const a=document.querySelector(".main-navbar .navbar-collapse");setTimeout(()=>{t(()=>{if(s())for(const e of document.querySelectorAll("[data-scroll]"))a.querySelector(".navbar-nav").getBoundingClientRect().width>a.getBoundingClientRect().width?e.removeAttribute("hidden"):e.setAttribute("hidden","")})()},500);for(const n of document.querySelectorAll("[data-scroll]"))n.addEventListener("click",e=>{var t=a.getBoundingClientRect().width/2;switch(n.dataset.scroll){case"left":a.scrollLeft-=t;break;case"right":a.scrollLeft+=t}e.preventDefault()});$(".main-navbar .dropdown").on("show.bs.dropdown",function(){var e=document.querySelector(".main-navbar .navbar-collapse").scrollLeft;this.querySelector(".dropdown-menu").style.marginLeft=-e+"px"})}}(),featherIcon:()=>{feather.replace()},todo:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="todo-item"]')){const t=e.target.closest('[data-toggle="todo-item"]'),a=t.closest(".todo-item");t.checked?a.classList.add("done"):a.classList.remove("done")}})}(),fixFlatpickr:()=>function(){document.addEventListener("wheel",function(){document.activeElement.classList.contains("cur-year")&&document.activeElement.blur()})}(),summernoteFocus:()=>function(){$(document).on("summernote.focus",".summernote",function(){$(this).next().addClass("focus")}).on("summernote.blur",".summernote",function(){$(this).next().removeClass("focus")})}(),toast:e=>function(e){var t=void 0!==e.animation?e.animation:"true",a=void 0!==e.autohide?e.autohide:"true",n=void 0!==e.position?e.position:"top-right";const o=".toast-wrapper."+n;var s=void 0!==e.delay?e.delay:2e3,i="toast"+Date.now();let r="";switch(e.icon){case"success":r='<svg class="mr-2 text-success" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>';break;case"warning":r='<svg class="mr-2 text-warning" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>';break;case"error":r='<svg class="mr-2 text-danger" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"/><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>';break;default:r='<svg class="mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="21" height="21"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>'}e=`
      <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" id="${i}" data-autohide="${a}" data-animation="${t}" data-delay="${s}">
        <div class="toast-header">
          ${r}
          <strong>${e.title}</strong>
          <button type="button" class="close ml-auto" data-dismiss="toast" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="toast-body">${e.text}</div>
      </div>
    `,document.querySelector(o)||document.body.insertAdjacentHTML("beforeend",`<div class="toast-wrapper ${n}"></div>`),document.querySelector(o).insertAdjacentHTML("beforeend",e),$("#"+i).toast("show"),$("#"+i).on("hidden.bs.toast",function(){this.remove(),document.querySelectorAll(o+" .toast").length<1&&document.querySelector(o).remove()})}(e),autowidth:()=>function(){function e(e,t){const a=e.value||e.getAttribute("placeholder")||"";t.innerHTML=a.replace(/ /g,"&nbsp;"),e.style.setProperty("width",Math.ceil(window.getComputedStyle(t).width.replace("px",""))+1+"px","important")}document.querySelectorAll(".autowidth-hidden").length&&document.querySelectorAll(".autowidth-hidden").forEach(e=>e.remove());for(const a of document.querySelectorAll(".autowidth")){const n=document.createElement("div");n.classList.add("autowidth-hidden");var t=window.getComputedStyle(a);n.style.fontFamily=t.fontFamily,n.style.fontSize=t.fontSize,n.style.fontStyle=t.fontStyle,n.style.fontWeight=t.fontWeight,n.style.letterSpacing=t.letterSpacing,n.style.textTransform=t.textTransform,n.style.borderLeftWidth=t.borderLeftWidth,n.style.borderRightWidth=t.borderRightWidth,n.style.paddingLeft=t.paddingLeft,n.style.paddingRight=t.paddingRight,document.body.appendChild(n),e(a,n),a.classList.contains("inputmask")?a.oninput=()=>e(a,n):a.addEventListener("input",()=>e(a,n))}}(),togglePassword:()=>function(){document.addEventListener("click",e=>{if(e.target.closest('[data-toggle="password"]')){const t=e.target.closest('[data-toggle="password"]').parentNode.querySelector("input");t.type="password"===t.type?"text":"password"}})}(),bootstrapSelect:()=>function(){function t(e,t){t.style.display=""==e.value?"none":"inline";const a=e.parentNode.querySelector(".filter-option");""==e.value?a.classList.remove("mr-4"):a.classList.add("mr-4")}$(document).on("show.bs.select",".bootstrap-select",function(){this.querySelector(".dropdown-toggle").classList.add("focus")}).on("hide.bs.select",".bootstrap-select",function(){this.querySelector(".dropdown-toggle").classList.remove("focus")});for(const a of document.querySelectorAll("select.bs-select")){let e={style:"btn"};"true"===a.dataset.bsSelectCreatable&&(e.liveSearch=!0,e.noneResultsText="Press Enter to add: <b>{0}</b>"),a.dataset.bsSelectSize&&(e.style="btn btn-"+a.dataset.bsSelectSize,a.classList.add("form-control-"+a.dataset.bsSelectSize)),"true"===a.dataset.bsSelectClearable&&a.insertAdjacentHTML("afterend",'<span class="bs-select-clear"></span>'),$(a).selectpicker(e);const n=a.closest(".bootstrap-select");if("true"===a.dataset.bsSelectCreatable){const s=n.querySelector(".bs-searchbox .form-control");s.addEventListener("keyup",function(e){if(n.querySelector(".no-results")&&13===e.keyCode){a.insertAdjacentHTML("afterbegin",`<option value="${this.value}">${this.value}</option>`);let e=$(a).val();Array.isArray(e)?e.push(this.value):e=this.value,$(a).val(e),$(a).selectpicker("toggle"),$(a).selectpicker("refresh"),$(a).selectpicker("render"),n.querySelector(".dropdown-toggle").focus(),this.value=""}})}const o=a.parentNode.nextElementSibling;o&&o.classList.contains("bs-select-clear")&&(t(a,o),a.addEventListener("change",()=>t(a,o)),o.addEventListener("click",()=>{$(a).selectpicker("val",""),a.dispatchEvent(new Event("change"))}))}}(),select2:()=>function(){for(const t of document.querySelectorAll(".select2")){let e={width:"100%",minimumResultsForSearch:"Infinity"};t.dataset.select2Search&&"true"===t.dataset.select2Search&&delete e.minimumResultsForSearch,t.dataset.select2Content&&"true"===t.dataset.select2Content&&(e.templateResult=e=>e.id?$(e.element.dataset.content):e.text,e.templateSelection=e=>e.id?$(e.element.dataset.content):e.text),$(t).select2(e).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(e){$(this).data("unselecting")&&($(this).removeData("unselecting"),e.preventDefault())})}}(),inputClearable:()=>function(){document.addEventListener("click",e=>{e.target.closest('[data-toggle="clear"]')&&(e.target.closest('[data-toggle="clear"]').previousElementSibling.value="")})}()}})();$(()=>{$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip(),feather.replace()}),Theme.treeview(),Theme.toggleSidebar(),Theme.autofocusModal(),Theme.customFileInput(),Theme.cardToolbar(),Theme.navSection(),Theme.accordionActive(),Theme.dropdownHover(),Theme.checkAll(),Theme.backgroundCover(),Theme.innerToggleSidebar(),Theme.scrollNavbar(),Theme.featherIcon(),Theme.todo(),Theme.fixFlatpickr(),Theme.summernoteFocus(),Theme.togglePassword(),Theme.inputClearable();const observer=new MutationObserver(()=>{Theme.backgroundCover(),Theme.navSection(),Theme.accordionActive(),$('[data-toggle="popover"]').popover(),$('[data-toggle="tooltip"]').tooltip()});document.querySelector(".main")&&(observer.observe(document.querySelector(".main"),{childList:!0,subtree:!0}),observer.observe(document.querySelector(".sidebar"),{childList:!0,subtree:!0}));const blue=Theme.color("blue"),indigo=Theme.color("indigo"),purple=Theme.color("purple"),pink=Theme.color("pink"),red=Theme.color("red"),orange=Theme.color("orange"),yellow=Theme.color("yellow"),green=Theme.color("green"),teal=Theme.color("teal"),cyan=Theme.color("cyan"),gray=Theme.color("gray"),lime="#cddc39";(typeof define==="function"&&define.amd?define:function(e,t){if(typeof module!=="undefined"&&module.exports)module.exports=t(require("jquery"));else window.toastr=t(window.jQuery)})(["jquery"],function(k){return function(){var f,t,g,v=0,n="error",o="info",s="success",i="warning",e={clear:function(e,t){var a=y();f||$(a);r(e,a,t)||function(e){for(var t=f.children(),a=t.length-1;0<=a;a--)r(k(t[a]),e)}(a)},remove:function(e){var t=y();f||$(t);e&&0===k(":focus",e).length?w(e):f.children().length&&f.remove()},error:function(e,t,a){return l({type:n,iconClass:y().iconClasses.error,message:e,optionsOverride:a,title:t})},getContainer:$,info:function(e,t,a){return l({type:o,iconClass:y().iconClasses.info,message:e,optionsOverride:a,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,a){return l({type:s,iconClass:y().iconClasses.success,message:e,optionsOverride:a,title:t})},version:"2.1.4",warning:function(e,t,a){return l({type:i,iconClass:y().iconClasses.warning,message:e,optionsOverride:a,title:t})}};return e;function $(e,t){return e=e||y(),(f=k("#"+e.containerId)).length||t&&(e=e,(f=k("<div/>").attr("id",e.containerId).addClass(e.positionClass)).appendTo(k(e.target))),f}function r(e,t,a){a=!(!a||!a.force)&&a.force;return e&&(a||0===k(":focus",e).length)&&(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){w(e)}}),1)}function b(e){t&&t(e)}function l(t){var o=y(),e=t.iconClass||o.iconClass;if(void 0!==t.optionsOverride&&(o=k.extend(o,t.optionsOverride),e=t.optionsOverride.iconClass||e),!function(e,t){if(e.preventDuplicates){if(t.message===g)return!0;g=t.message}return!1}(o,t)){v++,f=$(o,!0);var s=null,i=k("<div/>"),a=k("<div/>"),n=k("<div/>"),r=k("<div/>"),l=k(o.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:v,state:"visible",startTime:new Date,options:o,map:t};return t.iconClass&&i.addClass(o.toastClass).addClass(e),function(){{var e;t.title&&(e=t.title,o.escapeHtml&&(e=u(t.title)),a.append(e).addClass(o.titleClass),i.append(a))}}(),function(){{var e;t.message&&(e=t.message,o.escapeHtml&&(e=u(t.message)),n.append(e).addClass(o.messageClass),i.append(n))}}(),o.closeButton&&(l.addClass(o.closeClass).attr("role","button"),i.prepend(l)),o.progressBar&&(r.addClass(o.progressClass),i.prepend(r)),o.rtl&&i.addClass("rtl"),o.newestOnTop?f.prepend(i):f.append(i),function(){var e="";switch(t.iconClass){case"toast-success":case"toast-info":e="polite";break;default:e="assertive"}i.attr("aria-live",e)}(),i.hide(),i[o.showMethod]({duration:o.showDuration,easing:o.showEasing,complete:o.onShown}),0<o.timeOut&&(s=setTimeout(p,o.timeOut),d.maxHideTime=parseFloat(o.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,o.progressBar&&(d.intervalId=setInterval(function(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;r.width(e+"%")},10))),function(){o.closeOnHover&&i.hover(m,h);!o.onclick&&o.tapToDismiss&&i.click(p);o.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),o.onCloseClick&&o.onCloseClick(e),p(!0)});o.onclick&&i.click(function(e){o.onclick(e),p()})}(),b(c),o.debug&&console&&console.log(c),i}function u(e){return(e=null==e?"":e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(e){var t=e&&!1!==o.closeMethod?o.closeMethod:o.hideMethod,a=e&&!1!==o.closeDuration?o.closeDuration:o.hideDuration,n=e&&!1!==o.closeEasing?o.closeEasing:o.hideEasing;if(!k(":focus",i).length||e)return clearTimeout(d.intervalId),i[t]({duration:a,easing:n,complete:function(){w(i),clearTimeout(s),o.onHidden&&"hidden"!==c.state&&o.onHidden(),c.state="hidden",c.endTime=new Date,b(c)}})}function h(){(0<o.timeOut||0<o.extendedTimeOut)&&(s=setTimeout(p,o.extendedTimeOut),d.maxHideTime=parseFloat(o.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function m(){clearTimeout(s),d.hideEta=0,i.stop(!0,!0)[o.showMethod]({duration:o.showDuration,easing:o.showEasing})}}function y(){return k.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1},e.options)}function w(e){f=f||$(),e.is(":visible")||(e.remove(),e=null,0===f.children().length&&(f.remove(),g=void 0))}}()});var app={inProgress:!1,setProgress:function(e){(app.inProgress=e)?($(".btn-progress").each(function(){var e=$(this);e.attr("data-orig-caption")||e.attr("data-orig-caption",e.html()),e.html('<i class="fas fa-circle-notch fa-spin"></i>')}),$(".card-progress").removeClass("d-none").show(),$("#ajax-modal .modal-footer .btn").attr("disabled","disabled").addClass("disabled")):($(".btn-progress").each(function(){var e=$(this);e.html(e.attr("data-orig-caption")).removeAttr("disabled").removeAttr("data-orig-caption")}),$("#ajax-modal .modal-footer .btn").removeAttr("disabled").removeClass("disabled"),$(".card-progress").hide())},reloadTimeline:function(e){$.ajax({url:"/ajax/timeline/reload/?fid="+e,data:{},success:function(e){processJSONResponse(e)}})},clearConnectedSelect:function(e){$(e).prop("disabled",!0).find("optgroup, option").remove().html(""),void 0!==$(e).data("connected-select")&&(e=$($(e).data("connected-select")),app.clearConnectedSelect(e))},updateConnectedSelects:function(e,o){$(e).each(function(e,t){var a,n=$(t);app.clearConnectedSelect(n),"0"!==o&&(a={},(a=n.data("params")?n.data("params"):a).id=o,void 0!==(t=n.data("fields"))&&$(t).each(function(){a[$(this).prop("name")]=$(this).val()}),$.ajax({url:"/ajax/lists/"+n.data("list")+"/",data:a,success:function(e){"object"!=typeof e&&(e=JSON.parse(e)),app.fillConnectedSelect(n,e)}}))})},fillConnectedSelect:function(e,t){var a=$(e),n=a.data("default-value")||0,e=a.data("default-select-first")||!1,o=!1,s=!1,i=!1,r="",l="";a.data("empty-option")&&(r+='<option value="0">'+a.data("empty-option")+"</option>"),t&&$.each(t,function(e,t){i=!1,t.groupId!==o&&t.groupId&&(o&&(r+="</optgroup>",o=!1),r+='<optgroup label="'+t.groupName+'">',o=t.groupId),t.id&&(Array.isArray(n)?-1!==n.indexOf(t.id)&&(i=s=!0):t.id==n&&(i=s=!0),t.data&&(l="",$.each(t.data,function(e,t){l+=" data-"+e+'="'+t+'"'})),r+='<option value="'+t.id+'"'+(i?' selected="selected"':"")+l+(t.style?' style="'+t.style+'"':"")+(t.class?' class="'+t.class+'"':"")+">"+t.text+"</option>")}),o&&(r+="</optgroup>"),a.append(r),a.removeAttr("disabled"),!s&&e&&a.find("option").first().prop("selected",!0),a.hasClass("select-picker")&&a.selectpicker("refresh"),a.trigger("change")},initControls:function(){$(document).on("click",".checkbox-highlight input",function(){var e=$(this),t=e.parents(".checkbox-highlight"),a=t.data("active")||"",n=t.data("inactive")||"";e.is(":checked")?(""!=n&&t.removeClass(n),""!=a&&t.addClass(a)):(""!=n&&t.addClass(n),""!=a&&t.removeClass(a))}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){$("input[name="+$(e.target).parent().attr("id")+"]").val($(e.target).attr("href").replace("#",""))}),$(document).on("click",".btn-modal-submit",function(){var e=$(this),t=e.parents(".modal-content").find("form"),a=e.val()||1,n=t.attr("action");t.attr("action",n.split("?")[0]+"?"+e.attr("name")+"="+a),t.submit()}),$(document).on("keyup",".alphanumeric-only",function(){this.value=this.value.replace(/[^a-z0-9]/gi,"")}),$(document).on("blur",".alphanumeric-only",function(){this.value=this.value.replace(/[^a-z0-9]/gi,"")}),$(document).on("blur",".time-format",function(){var e=$(this),t=e.val();e.val(moment(t.toString(),"LT").format("HH:mm"))}),$(document).on("keyup",".numbersonly",function(){var e=$(this).data("chars"),t=$(this).data("replace-from"),a=$(this).data("replace-to");t&&a&&(this.value=this.value.replace(t,a)),""!==e&&void 0!==e||(e="\\-.,");e=new RegExp("[^0-9"+e+"]","ig");this.value=this.value.replace(e,"")}),$(document).on("blur",".numbersonly",function(){var e=$(this).data("chars");""!==e&&void 0!==e||(e="\\-.,");e=new RegExp("[^0-9"+e+"]","ig");this.value=this.value.replace(e,"")}),$(".btn-insert-text").on("click",function(){var e=$(this),t=e.parents("fieldset").find(".htmleditor");t.summernote("editor.saveRange"),t.summernote("editor.restoreRange"),t.summernote("editor.focus"),t.summernote("editor.insertText",e.html())}),$(document).on("change",".change-label",function(){var e=$(this);"0"!=e.val()&&(e=e.find("option:selected").text(),$(".has-label").parents(".input-group").find(".input-group-text").html(e))}),$(document).on("change",".change-state-on-change",function(){var a=$(this),e=a.data("enable-fields"),t=a.data("disable-fields"),n=a.data("enable-value"),o=a.data("disable-value"),s=a.data("readonly-fields"),i=a.data("readonly-value"),r=a.data("visible-ids"),l=a.data("visible-value");e&&$(e).each(function(e,t){a.val()==n?$(t).removeAttr("disabled"):$(t).attr("disabled","disabled")}),t&&$(t).each(function(e,t){a.val()==o?$(t).attr("disabled","disabled"):$(t).removeAttr("disabled")}),s&&$(s).each(function(e,t){a.val()==i?$(t).removeAttr("readonly"):$(t).attr("readonly","readonly")}),r&&$(r).each(function(e,t){a.val()==l?$(t).removeClass("d-none").show():$(t).hide()})}),$(document).on("change",".change-state",function(e){e.stopPropagation();var a,t=$(this),e=t.data("stateOptions"),n=!1;e&&(a=this.type&&"checkbox"===this.type?t.is(":checked")?1:0:!this.type||"radio"!==this.type||t.is(":checked")?t.val():0,$.each(e,function(e,t){e==a&&(n=!0,$.each(t,function(e,t){"show"===e?$(t).removeClass("d-none").show():"hide"===e?$(t).hide():"disable"===e?$(t).attr("disabled","disabled"):"enable"===e?$(t).removeAttr("disabled"):"readonly"===e?$(t).attr("readonly","readonly"):"editable"===e?$(t).removeAttr("readonly"):"value"===e&&$(t.el).val(t.val).trigger("change")}))}),n||(t=t.data("stateDefault"))&&$.each(t,function(e,t){"show"===e?$(t).removeClass("d-none").show():"hide"===e?$(t).hide():"disable"===e?$(t).attr("disabled","disabled"):"enable"===e?$(t).removeAttr("disabled"):"readonly"===e?$(t).attr("readonly","readonly"):"editable"===e?$(t).removeAttr("readonly"):"value"===e&&$(t.el).val(t.val)}))}),$("table.user_level_rights input:checkbox").on("click",function(e){var t=$(this),a=t.attr("data-usergroup"),n=t.attr("data-role"),o=t.attr("data-page"),s=(s=t.attr("data-function"))||"";$.ajax({url:"/ajax/accessrights/",data:"usergroup="+a+"&role="+n+"&page="+o+"&function="+s+"&checked="+(t.is(":checked")?1:0)})}),$("table.user_level_rights .btn-accesslevel").on("click",function(e){var t=$(this),a=t.closest(".btn-group").find("button"),n=t.attr("data-value"),o=t.attr("data-color"),s=t.attr("data-ico"),i=t.closest(".btn-group").attr("data-usergroup"),r=t.closest(".btn-group").attr("data-role"),t=t.closest(".btn-group").attr("data-page"),l=a.attr("data-ico"),d=a.attr("data-color");$.ajax({url:"/ajax/accessrights/",data:"usergroup="+i+"&role="+r+"&page="+t+"&value="+n,success:function(e){a.toggleClass("btn-"+o+" btn-"+d).attr("data-color",o).attr("data-ico",s),a.find("i").toggleClass("fa-"+s+" fa-"+l)}})}),$('[data-toggle="accept"]').on("click",function(){var e=$(this);e.is(":checked")?e.parents("form").find(".btn-accept").removeAttr("disabled"):e.parents("form").find(".btn-accept").attr("disabled","disabled")}),$(".upload-profile-img").on("click",function(e){e.preventDefault(),$("#fileInput:hidden").trigger("click")}),$(".delete-profile-img").on("click",function(e){e.preventDefault(),$.ajax({url:"/ajax/fileupload/delete-profile-img/",success:function(e){processJSONResponse(e)}})}),$("#fileInput").on("change",function(){var e=$(this).val();if(!/(\.jpg|\.jpeg|\.png|\.gif)$/i.exec(e))return app.showMessage({type:"warning",message:"Hibás fájltípus! Engedélyezett fájltípusok: jpg, png, gif"}),$("#fileInput").val(""),!1;$("#img-upload-form").submit()}),$("#img-upload-form").on("submit",function(e){var t=$(this);e.preventDefault(),$.ajax({url:t.attr("action"),type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){processJSONResponse(e)},error:function(e){app.showMessage({type:"error",message:"Invalid file."})}})}),$("body").on("click",".fileuploader-action-multiselect",function(){var e=$(this);e.parents(".fileuploader-item-inner").toggleClass("selected"),e.parents(".fileuploader-item-inner").find(".fileuploader-item-image img").toggleClass("selected-img"),e.find("i").toggleClass("fa-square fa-check-square")}),$(".chk-notification").on("click",function(e){var t=$(this),a=parseInt(t.data("id")),n=t.data("type"),o=parseInt(t.data("uid")),t=t.is(":checked")?1:0;$.ajax({url:"/ajax/subscribe-notification/",data:"id="+a+"&type="+n+"&uid="+o+"&value="+t,success:function(e){}})}),jQuery().select2&&$(".select2:not(.inited)").addClass("inited").select2(),jQuery().selectpicker&&$(".select-picker:not(.inited)").addClass("inited").selectpicker(),0<$(".htmleditor").length&&$(".htmleditor").summernote({height:300,toolbar:[["edit",["undo","redo"]],["font",["bold","italic","underline","fontsize","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["insert",["table","link","gallery","video"]],["misc",["fullscreen","codeview"]],["cleaner",["cleaner"]]],cleaner:{action:"both",newline:"<br>",notStyle:"position:hidden;top:0;left:0;right:0",icon:'<i class="fa fa-eraser"></i>',keepHtml:!0,keepOnlyTags:["<p>","<br>","<ul>","<ol>","<li>","<b>","<strong>","<i>","<a>","<table>","<tr>","<th>","<td>"],keepClasses:!1,badTags:["style","script","applet","embed","noframes","noscript","html"],badAttributes:["style","start","class"],limitChars:!1,limitDisplay:"none",limitStop:!1},callbacks:{onInit:function(){$(this).data("image_dialog_images_url","/ajax/gallery-content/"),$(this).data("image_dialog_title","Gallery"),$(this).data("image_dialog_close_btn_text","Close"),$(this).data("image_dialog_ok_btn_text","OK")}}}),$(".btn-notification").on("click",function(){var e=$(this),t=e.data("url"),a=parseInt(e.data("id"));e.removeClass("note-new"),e.parent().addClass("viewed"),$.ajax({url:"/ajax/notifications/viewed/",data:"id="+a,success:function(e){processJSONResponse(e),t&&(window.location=t)}})}),initInfiniteScroll(),this.reInit()},reInit:function(){jQuery().select2&&$(".select2:not(.inited)").addClass("inited").select2(),jQuery().selectpicker&&$(".select-picker:not(.inited)").addClass("inited").selectpicker(),$.fn.parsley&&$(".parsley-form:not(.inited)").each(function(){$(this).addClass("inited"),$(this).parsley({trigger:"change",errorClass:"",successClass:"",errorsWrapper:"<div></div>",errorTemplate:'<label class="error"></label>'}).on("field:success",function(e){e.$element.parents(".form-group").removeClass("has-error")}).on("field:error",function(e){e.$element.parents(".form-group").removeClass("has-success").addClass("has-error"),app.setProgress(!1)})}),$("input.tagsinput:not(.inited)").each(function(){$(this).addClass("inited"),$(this).tagsinput({trimValue:!0,freeText:!0}),$(this).tagsinput("input").attr("data-parsley-ui-enabled","false").on("blur",function(){$(this).val()&&($(this).parent().parent().find(".tagsinput").tagsinput("add",$(this).val()),$(this).val(""))})}),$("select.tagsinput:not(.inited)").each(function(){$(this).addClass("inited"),$(this).tagsinput({itemValue:"id",itemText:"label"}),$(this).find("option").each(function(){$(this).parent().tagsinput("add",{id:$(this).attr("value"),label:$(this).html()})}),$(this).tagsinput("input").parent().addClass("bootstrap-tagsinput-fullwidth"),$(this).tagsinput("input").attr("data-list-url",$(this).attr("data-list-url")).attr("data-scope",$(this).attr("data-scope")).addClass("catselautocomplete")}),$(".autocomplete:not(.inited)").each(function(){var n=$(this);n.addClass("inited");var o={},s=!1,i=n.attr("id"),a=parseInt(n.data("addnew"))||0,r=n.data("insertfields")||!1,l=n.data("searchfields")||!1,d=n.data("callback")||!1,c=n.data("clearonselect")||!1,u=n.data("url")||!1;u=u||"/ajax/autocomplete/"+(n.data("list")||"")+"/",n.autoComplete({resolver:"custom",minLength:2,preventEnter:!0,events:{search:function(e,t){(o={}).q=e,l&&$(l).each(function(e,t){o[$(t).attr("id")]=$(t).val()}),$.ajax(u,{data:o}).done(function(e){e.results&&t(e.results)})}}}),n.on("focus",function(){n.autoComplete("show")}),n.on("change",function(){s=!0}),n.on("keyup",function(e){13===e.keyCode&&(e.preventDefault(),s=!0,n.trigger("autocomplete.freevalue",[n.val()]))}),n.on("autocomplete.select",function(e,t){var a;$("#"+i+"-id").val(t.id),s=!1,(o={}).id=t.id,o.action="count",$.ajax(u,{data:o}),!d||"function"==typeof(a=window[d])&&((o={}).id=t.id,r&&$(r).each(function(e,t){o[$(t).attr("id")]=$(t).val()}),a.call(null,t)),c&&(n.autoComplete("clear"),$("#"+i+"-id").val(0))}),n.on("autocomplete.freevalue",function(e,t){a?s&&""!==t&&(s=!1,(o={}).value=t,o.action="add",r&&$(r).each(function(e,t){o[$(t).attr("id")]=$(t).val()}),$.ajax(u,{data:o}).done(function(e){var t;e.id&&($("#"+i+"-id").val(e.id),!d||"function"==typeof(t=window[d])&&((o={}).id=e.id,r&&$(r).each(function(e,t){o[$(t).attr("id")]=$(t).val()}),t.call(null,o)))})):$("#"+i+"-id").val(0),c&&(n.autoComplete("clear"),$("#"+i+"-id").val(0))})}),$(".catselautocomplete:not(.inited)").each(function(){var e=$(this),n=e.attr("data-scope")||0,a=e.data("callback")||!1,o=e.data("insert-fields")||!1,s=e.data("clearonselect")||!1,i=e.data("url")||!1;i=i||"/ajax/autocomplete/"+(e.data("list")||"")+"/",e.addClass("inited"),e.catcomplete({minLength:2,source:function(e,t){$.ajax({url:i,dataType:"jsonp",data:{q:e.term,scope:n},success:function(n){var o,s={};for(o in n){var i=n[o];let e=!1,t=!1,a=!1;"data"in i&&(i.data.subText&&(e=i.data.subText),i.data.image&&(t=i.data.image),i.data.icon&&(a=i.data.icon)),s[i.id]={value:i.id,label:i.text,category:i.groupName,categoryId:i.groupId,subText:e,image:t,icon:a,class:"ui-menu-item"}}t(s)}})},focus:function(e,t){return $(this).parent().hasClass("bootstrap-tagsinput")||($(this).val(t.item.label),$("#"+this.id+"-id").val(t.item.value)),!1},select:function(e,t){if($(this).parent().hasClass("bootstrap-tagsinput"))$(this).parent().next().tagsinput("add",{id:t.item.value,label:t.item.label}),$(this).val("");else if($(this).val(t.item.label),$("#"+this.id+"-id").val(t.item.value),a){let e=window[a];if("function"==typeof e){let a={id:t.item.value,scope:n};o&&$(o).each(function(e,t){a[$(t).attr("id")]=$(t).val()}),e(a)}}return s&&($(this).val(""),$("#"+this.id+"-id").val("")),!1}}).focusout(function(){$(this).parent().hasClass("bootstrap-tagsinput")||""==$(this).val()&&$("#"+this.id+"-id").val("")})}),$.fn.datepicker&&($(".datepicker:not(.inited)").each(function(){var e=$(this);e.addClass("inited");var t,a=e.attr("data-language")||"en",n=parseInt(e.attr("data-firstday")||1),o=e.attr("data-dateformat")||"yy-mm-dd",s=parseInt(e.attr("data-calendars")||1),i=e.attr("data-change-year")||"false",r="true"===(r=e.attr("data-change-month")||"true");t=(i="true"===i)&&e.attr("data-year-range")||"c-10:c+10";var l=e.attr("data-min-date")||"",d=e.attr("data-max-date")||"",c=e.attr("data-open")||!1,u=e.attr("data-datelimit-min")||!1,p=e.attr("data-datelimit-max")||!1,h=e.attr("data-range-from")||!1,m=e.attr("data-range-to")||!1;e.datepicker($.extend({},$.datepicker.regional[a],{firstDay:n,dateFormat:o,numberOfMonths:s,changeMonth:r,changeYear:i,yearRange:t,minDate:l,maxDate:d,prevText:"",nextText:"",beforeShowDay:function(e){var t,a;m&&$("#"+m)?(t=$.datepicker.parseDate(o,$(this).val()),a=$.datepicker.parseDate(o,$("#"+m).val())):h&&$("#"+h)&&(t=$.datepicker.parseDate(o,$("#"+h).val()),a=$.datepicker.parseDate(o,$(this).val()));var n="";return t&&e.getTime()===t.getTime()&&(n+=" dp-range-start"),a&&e.getTime()===a.getTime()&&(n+=" dp-range-end"),[!0,t&&a&&t<=e&&e<=a?"dp-highlight"+n:n]},onClose:function(e){u&&$("#"+u)&&$("#"+u).datepicker("option","minDate",e),p&&$("#"+p)&&$("#"+p).datepicker("option","maxDate",e),c&&$("#"+c)&&""!=e&&$("#"+c).datepicker("show")},onSelect:function(e,t){$(this).trigger("onblur"),$(this).trigger("change")}}))}),$("body").hasClass("datepicker-inited")||($("body").addClass("datepicker-inited"),$("body").on("mouseenter","#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)",function(){var a,n,o,s,i,r,l;0<$(".ui-datepicker-calendar .dp-range-start, .ui-datepicker-calendar .dp-range-end").length&&($(this).addClass("dp-state-hover"),n=a=!1,0<$(".ui-datepicker-calendar .dp-range-start.dp-range-end .ui-state-active").length?n=!0:0<$(".ui-datepicker-calendar .dp-range-start .ui-state-active").length?a=!0:0<$(".ui-datepicker-calendar .dp-range-end .ui-state-active").length||!a&&0<$(".ui-datepicker-calendar .dp-range-start").length?n=!0:!n&&0<$(".ui-datepicker-calendar .dp-range-end").length&&(a=!0),$(".ui-datepicker-calendar .dp-range-start").addClass("dp-range-start-h").removeClass("dp-range-start"),$(".ui-datepicker-calendar .dp-range-end").addClass("dp-range-end-h").removeClass("dp-range-end"),$(".ui-datepicker-calendar .dp-highlight").addClass("dp-highlight-h").removeClass("dp-highlight"),$(".ui-datepicker-calendar .ui-state-active").addClass("ui-state-active-h").removeClass("ui-state-active"),l=r=i=s=o=!1,$("#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)").each(function(e,t){$(t).hasClass("dp-state-hover")&&(o=!0),!(s=$(t).hasClass("dp-range-start-h")?!0:s)&&$(t).hasClass("dp-highlight-h")&&(s=!0,n?r=!0:a=!0),$(t).hasClass("dp-range-end-h")&&(i=!0),r?l||(a&&!i||n&&!o?$(t).addClass("dp-hover"):(l=!0,$(t).addClass("dp-hover-end"))):(a&&o&&!i&&(r=!0,$(t).addClass("dp-hover-start")),n&&s&&!o&&(r=!0,$(t).addClass("dp-hover-start")))}))}),$("body").on("mouseleave","#ui-datepicker-div .ui-datepicker-calendar td:not(.ui-datepicker-unselectable,.ui-state-disabled)",function(){$("#ui-datepicker-div .ui-datepicker-calendar td").removeClass("dp-hover dp-state-hover dp-hover-start dp-hover-end"),$(".ui-datepicker-calendar .dp-range-start-h").addClass("dp-range-start").removeClass("dp-range-start-h"),$(".ui-datepicker-calendar .dp-range-end-h").addClass("dp-range-end").removeClass("dp-range-end-h"),$(".ui-datepicker-calendar .dp-highlight-h").addClass("dp-highlight").removeClass("dp-highlight-h"),$(".ui-datepicker-calendar .ui-state-active-h").addClass("ui-state-active").removeClass("ui-state-active-h")}))),$(".connected-select:not(.cs-inited)").each(function(){$(this).addClass("cs-inited").on("change",function(){var e=$(this);app.updateConnectedSelects(e.data("connected-select"),e.val())}),"0"!==$(this).val()&&null!==$(this).val()&&$(this).trigger("change")}),$(".change-state-on-change").trigger("change"),$(".change-state").not(".skip-init").trigger("change");var e=$("input.file[type=file]");e.length&&e.fileinput(),$('[data-toggle="tooltip"]').tooltip(),$(".img-zoom").zoom(),"function"==typeof autosize&&autosize($("textarea.autosize"))},initModals:function(){$("#preview-modal").on("show.bs.modal",function(e){var t="",a=$(this);e.relatedTarget&&((e=$(e.relatedTarget)).data("size")&&$("#preview-modal .modal-dialog").addClass("modal-"+e.data("size")),"#"!=e.attr("href")&&""!=e.attr("href")?t=e.attr("href"):e.data("href")&&(t=e.data("href"))),""!=t&&a.find(".modal-content").load(t)}),$("#ajax-modal").on("show.bs.modal",function(e){var t="",a=$(this);e.relatedTarget&&((e=$(e.relatedTarget)).data("size")&&$("#ajax-modal .modal-dialog").addClass("modal-"+e.data("size")),"#"!=e.attr("href")&&""!=e.attr("href")?t=e.attr("href"):e.data("href")&&(t=e.data("href"))),""!=t&&a.find(".modal-content").load(t)}),$("#ajax-modal").on("hidden.bs.modal",function(e){$(e.target).removeData("bs.modal"),$("#ajax-modal .modal-dialog").removeClass("modal-sm modal-lg modal-xl"),$("#ajax-modal .modal-content").html(""),$.ajax({url:"/ajax/cleanup/"})}),$("#confirm-delete").on("show.bs.modal",function(e){e.stopPropagation();var t=$(this).find(".danger"),a=$(e.relatedTarget).data("color");t.removeClass("btn-primary btn-secondary btn-info btn-success btn-warning btn-danger"),$("#confirm-delete").removeClass("modal-outline-warning modal-outline-success modal-outline-primary modal-outline-info modal-outline-danger modal-outline-secondary"),$("#confirm-delete .modal-header").removeClass("bg-warning bg-success bg-primary bg-info bg-danger bg-secondary"),$("#confirm-delete .modal-content").removeClass("brc-danger-m2 brc-warning-m2 brc-success-m2 brc-primary-m2 brc-info-m2 brc-secondary-m2"),a?(t.addClass("btn-"+a),$("#confirm-delete").addClass("modal-outline-"+a),$("#confirm-delete .modal-header").addClass("bg-"+a),$("#confirm-delete .modal-content").addClass("brc-"+a+"-m2")):(t.addClass("btn-danger"),$("#confirm-delete").addClass("modal-outline-danger"),$("#confirm-delete .modal-header").addClass("bg-danger"),$("#confirm-delete .modal-content").addClass("brc-danger-m2")),null!=$(e.relatedTarget).data("href")?(t.data("href",$(e.relatedTarget).data("href")),t.on("click",function(){document.location=$(this).data("href")})):null!=$(e.relatedTarget).data("confirm-action")&&t.attr("onclick",$(e.relatedTarget).data("confirm-action")),null!=$(e.relatedTarget).data("confirm-button")?t.html($(e.relatedTarget).data("confirm-button")):t.html(t.data("default-caption")),null!=$(e.relatedTarget).data("title")?$("#confirm-delete .modal-title").html($(e.relatedTarget).data("title")):$("#confirm-delete .modal-title").html($("#confirm-delete .modal-title").data("default-title")),$(".confirm-question").html($(e.relatedTarget).data("confirm-question")),$(".debug-data").html($(e.relatedTarget).data("confirm-data"))}),$("#confirm-delete").on("hidden.bs.modal",function(){$(".modal-footer .btn:not(.btn-approve), .modal-header button").show(),$(".modal-footer .modal-loader").remove(),$("#ajax-modal").hasClass("in")&&$("body").addClass("modal-open")}),$(document).on("focus",".input-group > input, .input-group > select",function(e){$(this).parents(".input-group").addClass("input-group-focus")}).on("blur",".input-group > input, .input-group > select",function(e){$(this).parents(".input-group").removeClass("input-group-focus")})},showMessage:function(e){switch(toastr.options.progressBar=!0,toastr.options.closeButton=!0,e.type){case"warning":toastr.warning(e.message);break;case"error":toastr.error(e.message);break;case"success":toastr.success(e.message);break;case"info":default:toastr.info(e.message)}},showMessages:function(){"undefined"!=typeof _messages&&$.each(_messages,function(e,t){app.showMessage(t)})},initToaster:function(){setTimeout(function(){app.showMessages()},500)},checkLoginStatus:function(e){},init:function(){this.initControls(),this.initModals(),this.initToaster()}};function postModalForm(e,t,a){t=t||1,a=a||"save";var n=$(e).attr("id").substring(0,$(e).attr("id").length-5),o=new FormData($(e).get(0));o.append(n+"["+a+"]",t),app.setProgress(!0),$.ajax({type:"POST",url:$(e).attr("action"),data:o,cache:!1,processData:!1,contentType:!1,success:function(e){$("#confirm-delete").modal("hide"),e&&(processJSONResponse(e),app.setProgress(!1),app.reInit())}})}function pageRedirect(e){document.location=e}function modalFormPageRefresh(e){$("#ajax-modal").modal("hide"),window.location.href=window.location.href}function modalFormPageUpdate(e){$("#ajax-modal").modal("hide"),e&&processJSONResponse(e="object"!=typeof e?JSON.parse(e):e)}function fillValues(e){e.fill&&$.each(e.fill,function(e,t){$(e).val(t)})}function processJSONResponse(e){return"object"!=typeof e&&(e=JSON.parse(e)),$.each(e,function(n,e){$.each(e,function(e,t){var a;"object"==typeof window[n]?"function"==typeof window[n][e]&&window[n][e](t):"show"===e?!0===t?$(n).hide().removeClass("d-none").show():$(n).hide():"tagsinput"===e?$.each(t,function(e,t){t&&$(n).tagsinput("add",t)}):"summernote"===e?($(n).summernote("code",t),crm.isdirty=!1):"addclass"===e?$(n).addClass(t):"removeclass"===e?$(n).removeClass(t):"remove"===e?$(n).remove():"html"===e?$(n).html(t):"closeModal"===e?$(n).modal("hide"):"attr"===e?$.each(t,function(e,t){t?$(n).attr(e,t):$(n).removeAttr(e,"")}):"value"===e?$(n).is(":checkbox")||$(n).is(":radio")?$(n).prop("checked",t):$(n).val(t):"options"===e?($(n).find("option").remove(),$(n).append(t.map(function(e){return'<option value="'+e.id+'">'+e.name+"</option>"}))):"functions"===e?!t.callback||"function"==typeof(a=window[t.callback])&&a(t.arguments):"object"==typeof window[e]&&"function"==typeof window[e][n]&&window[e][n](t)})}),e}function initSortable(){$("#s-l-base").remove(),$(".s-l-opener").remove(),$(".sortableLists").unbind().removeData(),0<$(".sortableLists").length&&$(".sortableLists").sortableLists({maxLevels:2,hintClass:"hint",placeholderClass:"placeholder",ignoreClass:"no-sort",insertZonePlus:!0,opener:{active:!0,as:"html",close:'<i class="far fa-minus-square"></i>',open:'<i class="far fa-plus-square"></i>',openerCss:{width:"18px",height:"18px","margin-left":"-17px","margin-right":"-2px"}},isAllowed:function(e,t,a){return!e.data("category")&&a.data("category")||0===a.length?(t.css("background-color","rgba(27, 185, 52, 0.1)"),!0):(t.css("background-color","rgba(237, 28, 36, 0.1)"),!1)},onChange:function(e){var t=$(e).parents(".sortableLists"),a=t.data("listid"),e=t.data("url");e=e||"/ajax/listHandler/"+t.data("list")+"/sort/",$.ajax({type:"POST",url:e,data:JSON.stringify({listid:a,items:t.sortableListsToArray()}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){processJSONResponse(e)}})}})}function initInfiniteScroll(){0<$(".infinite_scroll").length&&($(window).scroll(function(){var t=$(window).scrollTop()+$(window).height()+400;$(".infinite_scroll:visible:not(.loading)").each(function(){var e;$(this).offset().top<t&&((e=parseInt($(this).data("current")))<parseInt($(this).data("pagenum"))?($(this).addClass("loading"),e=+e+1,$(this).data("current",e),$(this).data("callback")?executeFunctionByName($(this).data("callback"),window,this):$(this).data("url")&&$.ajax({url:$(this).data("url")+e,success:$.proxy(processInfiniteScroll,this)})):$(this).hide())})}),$(window).scroll())}function executeFunctionByName(e,t){for(var a=Array.prototype.slice.call(arguments,2),n=e.split("."),o=n.pop(),s=0;s<n.length;s++)t=t[n[s]];return t[o].apply(t,a)}function processInfiniteScroll(e){$($(this).data("container")).append(e),$(this).removeClass("loading")}function resetInfiniteScroll(e,t){e=$("#"+e);e.removeClass("loading").data("current",1).data("pagenum",t),1<t?e.show():e.hide()}$(function(){$.fn.modal.Constructor.prototype._enforceFocus=function(){},$.fn.extend({insertAtCaret:function(n){return this.each(function(){var e,t,a;document.selection?(this.focus(),document.selection.createRange().text=n,this.focus()):this.selectionStart||"0"==this.selectionStart?(e=this.selectionStart,t=this.selectionEnd,a=this.scrollTop,this.value=this.value.substring(0,e)+n+this.value.substring(t,this.value.length),this.focus(),this.selectionStart=e+n.length,this.selectionEnd=e+n.length,this.scrollTop=a):(this.value+=n,this.focus())}),this}}),app.init()}),$.widget("custom.catcomplete",$.ui.autocomplete,{_create:function(){this._super(),this.widget().menu("option","items","> :not(.ui-autocomplete-category)")},_renderMenu:function(a,e){var n,o=this,s="";$.each(e,function(e,t){t.categoryId!==s&&t.categoryId&&(n='<li class="ui-autocomplete-category">',n+=t.category+"</li>",a.append(n),s=t.categoryId),o._renderItemData(a,t)})},_renderItem:function(e,t){let a='<div class="ui-menu-item-wrapper">';return t.image&&(a+='<img class="rounded mr-2" width="50" height="50" src="'+t.image+'" />'),t.icon&&(a+='<i class="'+t.icon+' mr-2"></i>'),a+=t.label,t.subText&&(a+='<div class="ui-autocomplete-subtext">'+t.subText+"</div>"),a+="</div>",$("<li>").html(a).appendTo(e)}});var tables={inProgress:!1,setProgress:function(e){tables.inProgress=e},sendRequest:function(e,t,a,n){""!==t&&t||(t=0);var o=!1,s=!1,i=$("#table_"+e);tables.setProgress(!0),0<i.length&&(o=i.data("alias"),e=i.data("table"),s=i.data("options"));var r=e+"/"+t+"/";if(4<arguments.length)for(var l=4;l<arguments.length;l++)r+=arguments[l]+"/";$.ajax({method:"POST",url:"/ajax/tables/"+r,data:{alias:o,action:a,params:n,options:s}}).done(function(e){for(var t in e="object"!=typeof e?JSON.parse(e):e)t.includes("tbody")?(i.find("tbody").remove(),i.append(e[t])):"fields"===t?processJSONResponse(e[t]):$(t).replaceWith(e[t]);app.reInit(),tables.reInit(),tables.setProgress(!1)})},checkBox:function(e,t,a,n,o){tables.sendRequest(e,t,o="mark"!==o?"check":o,{field:a,value:n})},page:function(e,t,a){tables.sendRequest(e,t,"page",{page:a})},delete:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"delete")},unDelete:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"undelete")},copy:function(e,t){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,"copy")},action:function(e,t,a,n){$("#confirm-delete").modal("hide"),tables.sendRequest(e,t,a,n)},reloadTable:function(e){tables.reload(e[0],e[1],e[2])},selectRow:function(e,t){var a,n={},o=0;$("#table_"+e).find(".table-row-selector").each(function(e,t){a=parseInt($(t).val()),o=$(t).is(":checked")?1:0,n[a]=o}),tables.sendRequest(e,t,"select-row",{ids:n})},reload:function(e,t,a){(a=void 0===a||a)&&$("#ajax-modal").modal("hide"),tables.sendRequest(e,t,"reload")},initControls:function(){$(document).on("click",".tr-clickable",function(e){var t;$(this).data("modal")?((t=$("#ajax-modal")).find(".modal-dialog").addClass("modal-"+$(this).data("size")),t.find(".modal-content").load($(this).data("href")),t.modal("show")):$(this).data("url")?"self"===$(this).data("target")?document.location=$(this).data("url"):window.open($(this).data("url")):(t=$("a[data-toggle='modal'] i"),$(e.target).is(t)||(window.location.href+=$(this).data("edit")))}),$(".td-clickable").on("click",function(e){var t=$(this).parent("tr").data("url");document.location=t}),$(document).on("click",".btn-table-pager",function(e){var t=$(this),a=t.parents(".pagination").data("table"),n=t.parents(".pagination").data("keyvalues"),o=t.data("page");t.hasClass("disabled")||t.hasClass("active")||tables.page(a,n,o)}),$(document).on("click",".table-options, .table-check",function(e){e.stopImmediatePropagation()}),$(document).on("click",".table-check input[type=checkbox]",function(e){var t=$(this);e.stopImmediatePropagation();e=t.is(":checked")?1:0;tables.checkBox(t.data("table"),t.data("keyvalue"),t.data("field"),e,t.data("method"))}),$(document).on("click",".table-row-selector",function(){var e=$(this),t=e.parents("table").data("table"),a=e.parents("table").data("foreignkey");e.is(":checked")?e.parents("tr").addClass("tr-selected"):e.parents("tr").removeClass("tr-selected"),tables.selectRow(t,a)}),$(document).on("click",".table-row-selector-all",function(e){var t=$(this),a=t.parents("table").data("table"),n=t.parents("table").data("foreignkey"),o=t.is(":checked");o?t.parents("table").find(".table-row-selector").prop("checked",o).parents("tr").addClass("tr-selected"):t.parents("table").find(".table-row-selector").prop("checked",o).parents("tr").removeClass("tr-selected"),tables.selectRow(a,n)}),$(document).on("click",".table-row-selector-menu-all",function(e){$(".table-row-selector-all").trigger("click")}),$(document).on("click",".table-row-selector-menu-none",function(e){var t=$(this),a=t.parents("table").data("table"),n=t.parents("table").data("foreignkey");t.parents("table").find(".table-row-selector").prop("checked",!1).parents("tr").removeClass("tr-selected"),$(".table-row-selector-all").prop("checked",!1),tables.sendRequest(a,n,"unselect-row")})},reInit:function(){$(".table-sort").sortable({items:"tr:not(.no-sort)",placeholder:"table-sort-placeholder",stop:function(e,t){var a=$(t.item).data("table"),n=$(t.item).data("keyvalue"),t=$(t.item).data("groupid")||0,e=$(e.target).sortable("toArray");tables.sendRequest(a,n,"sort",{groupId:t,order:e})}}).disableSelection(),$(".table-row-selector:checked").length===$(".table-row-selector").length?$(".table-row-selector-all").prop("checked",!0):$(".table-row-selector-all").prop("checked",!1)},init:function(){this.initControls(),this.reInit()}};function addInterval(t){$.ajax("/ajax/intervals/add/",{data:t}).done(function(e){e&&tables.reload("shippingIntervals",t.smid,!1),$("#si_time_start").val(""),$("#si_time_end").val("")})}function removeInterval(e,t){$.ajax({method:"GET",url:"/ajax/intervals/remove/",data:{smid:t,id:e}}).done(function(e){$("#confirm-delete").modal("hide"),tables.reload("shippingIntervals",t,!1)})}$(function(){tables.init(),$(document).on("click","#btnAddInterval",function(e){var t=$(this),t={smid:parseInt(t.data("smid")),start:$("#si_time_start").val(),end:$("#si_time_end").val()};t.smid&&t.start&&t.end&&addInterval(t)})});var orders={inProgress:!1,sendRequest:function(e,t,a){if(orders.setProgress(!0),2<arguments.length)for(var n=2;n<arguments.length;n++)e+="/"+arguments[n];$.ajax({method:"GET",url:"/ajax/orders/"+e+"/",data:t}).done(function(e){processJSONResponse(e="object"!=typeof e?JSON.parse(e):e),!a||"function"==typeof(e=window[a])&&e(),orders.setProgress(!1),orders.reInit()})},setProgress:function(e){orders.inProgress=e},showVariants:function(e){$.ajax({url:"/ajax/forms/showVariants/"+parseInt(e.productId)+"|"+parseInt(e.cartId)+"/"+e.tableName+"/",processData:!1,contentType:!1,success:function(e){$("#ajax-modal .modal-content").html(e),$("#ajax-modal").modal("show")}})},refreshTable:function(e){tables.reload(e.tableName,e.cartId)},removeProduct:function(e){$("#confirm-delete").modal("hide"),orders.sendRequest("removeProduct",{id:e,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})},loadShippingMode:function(){var e=parseInt($('input[name="shippingMode"]:checked').val());e&&orders.sendRequest("getShippingDetails",{id:e,cartKey:$("#cartKey").val()},"setupShippingDetailsForm")},saveShippingMode:function(){var t=parseInt($('input[name="shippingMode"]:checked').val());if(t){let e=parseInt($("#intervalId").val());$("#customInterval").is(":checked")&&(e=-1),orders.sendRequest("setShippingMode",{id:t,date:$("#shippingDate").val(),intervalId:e,customInterval:$("#custom-interval-text").val(),cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}},initControls:function(){$(document).on("click",'[data-toggle="clear"], .clear-inputs',function(){$("#finishOrder-form input").val(""),$("#finishOrder-form select").val("HU")}),$(document).on("click",".quantity-select",function(){var e=$(this),t=parseInt(e.parents(".input-group").find("input").attr("data-min")||1),a=parseInt(e.parents(".input-group").find("input").attr("data-max")||99999);0===a&&(a=99999);var n=parseInt(e.data("value")),o=e.parents(".input-group").find("input"),s=parseInt(o.val());o.val(s=(s=a<(s+=n)?a:s)<t?t:s),t<s?e.parents(".input-group").find(".btn-minus").removeAttr("disabled"):e.parents(".input-group").find(".btn-minus").attr("disabled","disabled"),s<a?e.parents(".input-group").find(".btn-plus").removeAttr("disabled"):e.parents(".input-group").find(".btn-plus").attr("disabled","disabled"),e.parents(".input-group").data("id")&&orders.sendRequest("changeProduct",{id:e.parents(".input-group").data("id"),quantity:s,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}),$(document).on("blur",".quantity-input",function(){var e=$(this),t=parseInt(e.val()),a=parseInt(e.parents(".input-group").find("input").attr("data-min")||1),n=parseInt(e.parents(".input-group").find("input").attr("data-max")||99999);e.val(t=(t=(n=0===n?99999:n)<t?n:t)<a?a:t),e.parents(".input-group").data("id")&&orders.sendRequest("changeProduct",{id:e.parents(".input-group").data("id"),quantity:t,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}),$(document).on("click",".set-shipping-mode",function(){orders.loadShippingMode()}),$(document).on("click",".set-order-type",function(){var e=0,t=[],a=parseInt($(".set-order-type:checked").val());$(".item-local-consumption").each(function(){t.push($(this).data("id"))}),$(".item-local-consumption").removeAttr("disabled"),1===a?($("#shipping-modes").hide(),$(".item-local-consumption").prop("checked",!0),e=1):2===a?($("#shipping-modes").hide(),$(".item-local-consumption").prop("checked",!1)):($("#shipping-modes").removeClass("d-none").show(),$(".item-local-consumption").prop("checked",!1).attr("disabled","disabled")),orders.sendRequest("setLocalConsumption",{localConsumption:e,itemId:t,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()}),orders.sendRequest("setOrderType",{type:a,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}),$(document).on("click",".set-payment-mode",function(){var e=parseInt($(this).data("id"));e&&orders.sendRequest("setPaymentMode",{id:e,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}),$(document).on("click",".item-local-consumption",function(){var e=parseInt($(this).data("id"));orders.sendRequest("setLocalConsumption",{localConsumption:$(this).is(":checked")?1:0,itemId:e,cartId:parseInt($("#cartId").val()),cartKey:$("#cartKey").val()})}),$(document).on("change",".save-shipping-mode",function(){orders.saveShippingMode()}),$(document).on("change",".check-tax-number",function(){orders.sendRequest("checkTaxNumber",{taxNumber:$(this).val()})}),$(document).on("click",".set-custom-interval",function(){var e=$(this),t=e.parents("#shipping-details"),a=t.find(".date-picker"),n=!1,o=!1;e.is(":checked")?(t.find(".custom-interval").removeClass("d-none").show(),t.find(".interval-select").hide(),n="today",o=[]):(t.find(".custom-interval").hide(),t.find(".interval-select").removeClass("d-none").show()),0<a.length&&(a.flatpickr({dateFormat:"Y-m-d",minDate:n||a.data("min-date"),disable:o||a.data("off-dates")||[],locale:"hu"}),n||a.val(a.data("min-date"))),orders.saveShippingMode()}),$(document).on("click",".copy-invoice-address",function(){$("#us_country").val($("#us_invoice_country").val()),$("#us_zip").val($("#us_invoice_zip").val()),$("#us_city").val($("#us_invoice_city").val()),$("#us_address").val($("#us_invoice_address").val())}),$(document).on("click",".copy-shipping-address",function(){$("#us_invoice_name").val($("#us_lastname").val()+" "+$("#us_firstname").val()),$("#us_invoice_country").val($("#us_country").val()),$("#us_invoice_zip").val($("#us_zip").val()),$("#us_invoice_city").val($("#us_city").val()),$("#us_invoice_address").val($("#us_address").val())}),this.reInit()},reInit:function(){$.fn.flatpickr&&$(".date-picker:not(.inited)").each(function(){$(this).addClass("inited");var e=$(this).parents(".shipping-intervals").find(".set-shipping-interval"),t=$(this).data("min-date"),a=$(this).data("off-dates")||[],n=$(this).data("dow")||[];e.is(":checked")&&(t="today",a=[]),$(this).flatpickr({dateFormat:"Y-m-d",minDate:t,disable:a,enable:[function(e){return!(0<n.length)||!!n.includes(e.getDay())}],locale:"hu"})})},init:function(){this.initControls(),this.loadShippingMode()}};function loadUserData(e){orders.sendRequest("loadUserData",e)}function addProduct(e){orders.sendRequest("addProduct",e)}function setupShippingDetailsForm(){orders.saveShippingMode()}$(function(){$.fn.modal.Constructor.prototype._enforceFocus=function(){},orders.init()});
//# sourceMappingURL=admin.min.js.map