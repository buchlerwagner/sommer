function getLables(){var t=$("#frm-dictionary :not(textarea)").serialize();$.ajax({url:"/ajax/dictionary/loadcontent/?"+t}).done(function(t){for(var a in t="object"!=typeof t?JSON.parse(t):t)$(a).html(t[a]),"progressbars"==a&&updateProgressBars("progress-orig",t.progressbars.orig.value,t.progressbars.orig.text),"totalpages"==a&&resetInfiniteScroll("scroll",t.totalpages),autosize($("textarea"))})}function checkDirty(){var t=!1;if($("#frm-dictionary").each(function(){$(this).find("textarea").hasClass("dirty")&&(t=!0)}),t){var a=$("#frm-dictionary").attr("data-confirmtxt");return confirm(a)}return!0}function updateProgressBars(t,a,e){t=$("#"+t+" .progress-bar");t.css("width",a+"%"),t.attr("aria-valuenow",a),t.html(e)}$(function(){"function"==typeof autosize&&autosize($("textarea")),$(document).on("change","#context",function(){checkDirty()&&getLables()}),$(document).on("change","textarea",function(){var t=$(this);t.addClass("dirty"),t.closest(".card").addClass("dict-mark-changed")}),$(document).on("keyup","textarea",function(){$(this).closest(".card").addClass("dict-mark-changed")}),$(document).on("focus","textarea",function(){$(this).closest(".card").find(".dict-tools").removeClass("d-none").show()}),$(document).on("blur","textarea",function(){var t=$(this);t.hasClass("dirty")||t.closest(".card").find(".dict-tools").hide()}),$(document).on("click","#btn-search",function(){checkDirty()&&getLables()}),$(document).on("click",".dict-btn-save",function(){var t,a,e,o,r,n,s=$(this).closest(".card");s.find("textarea").hasClass("dirty")&&(r=s.attr("data-key"),n=s.find("textarea").val(),t=$("#context").val(),a=$("#langfrom").val(),e=$("#langto").val(),o=$("#set-original").is(":checked")?1:0,r=r.trim(),n=n.trim(),$.ajax({type:"POST",url:"/ajax/dictionary/savecontent/",data:{label:r,langfrom:a,langto:e,context:t,value:encodeURIComponent(n),updatemode:o}}).done(function(t){"object"!=typeof t&&(t=JSON.parse(t)),s.find(".dict-date").html(t.date),updateProgressBars("progress-orig",t.progress.orig.value,t.progress.orig.text),$("#label-info-orig").html(t.progress.orig.info)}),s.find("textarea").removeClass("dirty"),s.removeClass("dict-mark-changed"),s.find(".lang-unchanged").html(n)),s.find(".dict-tools").hide()}),$(document).on("click",".dict-btn-cancel",function(){var t=$(this).closest(".card");if(t.find("textarea").hasClass("dirty")){var a=$("#frm-dictionary").attr("data-confirmtxt");if(!confirm(a))return!1;t.find("textarea").val(t.find(".lang-unchanged").html()),t.find("textarea").removeClass("dirty"),t.removeClass("dict-mark-changed")}t.find(".dict-tools").hide()}),$(document).on("click",".dict-btn-delete",function(t){t.stopPropagation();var a,e,o,r=$(this).closest(".card");confirm("Are you sure you want to permanently remove this label?")&&(a=r.attr("data-key"),e=$("#context").val(),o=$("#langfrom").val(),t=$("#langto").val(),$.ajax({url:"/ajax/dictionary/delete-key/",data:{key:a,langfrom:o,langto:t,context:e}}).done(function(t){1==(t="object"!=typeof t?JSON.parse(t):t).success&&(r.remove(),updateProgressBars("progress-orig",t.progress.orig.value,t.progress.orig.text),$("#label-info-orig").html(t.progress.orig.info))}))}),$(document).on("click",".dict-switch",function(){var t=$(this),a=t.html(),e=t.attr("data-text"),o=t.closest(".card").find(".dict-original");t.html(e),t.attr("data-text",a),o.hasClass("d-none")?o.removeClass("d-none").show():o.addClass("d-none").hide()}),$(document).on("click",".btn-select",function(){var t=$(this),a=t.attr("data-value"),e=t.closest(".btn-group").find("input");e.val()!=a&&checkDirty()&&(e.val(a),t.closest(".btn-group").find(".dropdown-toggle").html(t.html()),getLables())}),$(".inp-search").on("keydown",function(t){if(13==t.which)return checkDirty()&&getLables(),!1});var o=!1;$(document).on("click","#btn-startsync",function(){var e;o||(e=$(this),confirm("Are you sure you want to start the sync process?")&&(o=!0,e.attr("disabled","disabled").addClass("disabled"),$("#sync-progress").removeClass("d-none").show(),$.ajax({url:"/ajax/dictionary/do-sync/?lang="+$("#langto").val()}).done(function(t){for(var a in t="object"!=typeof t?JSON.parse(t):t)$(a).html(t[a]);e.removeAttr("disabled").removeClass("disabled"),$("#sync-progress").hide(),o=!1})))})});
//# sourceMappingURL=dictionary.min.js.map